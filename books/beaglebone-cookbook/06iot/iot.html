
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Internet of Things &#8212; BeagleBoard Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/collapsible-lists/css/tree_view.css?v=a885cde7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css?v=5c84f910" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=99f84846" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script src="../../../_static/collapsible-lists/js/CollapsibleLists.compressed.js?v=73120307"></script>
    <script src="../../../_static/collapsible-lists/js/apply-collapsible-lists.js?v=660e4f45"></script>
    <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js?v=ffc8af2d"></script>
    <script src="../../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js?v=12818e64"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'books/beaglebone-cookbook/06iot/iot';</script>
    <link rel="canonical" href="docs.beagleboard.io/books/beaglebone-cookbook/06iot/iot.html" />
    <link rel="icon" href="../../../_static/boris.svg"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="The Kernel" href="../07kernel/kernel.html" />
    <link rel="prev" title="Beyond the Basics" href="../05tips/tips.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
    <meta name="docbuild:last-update" content="Jun 29, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  

    <!-- Top version and announcement message -->
    <script>
        
    // Function to generate version and announcement banner HTML
    function getBannerHTML() {
        return `
            
            <aside id="bd-header-version-warning" class="d-print-none" aria-label="Version warning">
                <div class="bd-header-announcement__content ms-auto me-auto">
                    <div class="sidebar-message">
                        
                        
                        This is an <strong>unknown version</strong> of docs.
                        
                        <a class="btn text-wrap font-weight-bold ms-3 my-1 align-baseline pst-button-link-to-stable-version" href="https://docs.beagleboard.org">
                            Switch to released version
                        </a>
                    </div>
                </div>
            </aside>
            
            
        `;
    }
    
    // Get the target element where the banners will be added
    const bannerDiv = document.getElementsByClassName('pst-async-banner-revealer')[0];

    // Add version banner and announcement banner if bannerDiv is valid
    if (bannerDiv) {
        bannerDiv.innerHTML = getBannerHTML();
    }
    
    </script>

    
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.svg" class="logo__image only-light" alt="BeagleBoard Documentation - Home"/>
    <img src="../../../_static/logo.svg" class="logo__image only-dark pst-js-only" alt="BeagleBoard Documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="ms-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../intro/index.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../boards/index.html">
    Boards
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../projects/index.html">
    Projects
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Books
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../accessories/index.html">
    Accessories
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://www.beagleboard.org/about">
    About
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://www.beagleboard.org/donate">
    Donate
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://gsoc.beagleboard.org/">
    GSoC
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://forum.beagleboard.org/c/faq">
    FAQ
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://openbeagle.org/" title="OpenBeagle" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-gitlab fa-lg" aria-hidden="true"></i>
            <span class="sr-only">OpenBeagle</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://docs.beagleboard.org/" title="Docs" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-book fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Docs</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://bbb.io/discord" title="Discord" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discord fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://forum.beagleboard.org/" title="Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discourse fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Forum</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.beagleboard.org" title="BeagleBoard.org" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../../_static/images/boris.svg" class="icon-link-image" alt="BeagleBoard.org"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  



  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../intro/index.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../boards/index.html">
    Boards
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../projects/index.html">
    Projects
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Books
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../accessories/index.html">
    Accessories
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://www.beagleboard.org/about">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://www.beagleboard.org/donate">
    Donate
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://gsoc.beagleboard.org/">
    GSoC
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://forum.beagleboard.org/c/faq">
    FAQ
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://openbeagle.org/" title="OpenBeagle" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-gitlab fa-lg" aria-hidden="true"></i>
            <span class="sr-only">OpenBeagle</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://docs.beagleboard.org/" title="Docs" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-book fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Docs</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://bbb.io/discord" title="Discord" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discord fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://forum.beagleboard.org/" title="Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discourse fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Forum</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.beagleboard.org" title="BeagleBoard.org" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../../_static/images/boris.svg" class="icon-link-image" alt="BeagleBoard.org"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">BeagleBone Cookbook</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01basics/basics.html">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02sensors/sensors.html">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03displays/displays.html">Displays and Other Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04motors/motors.html">Motors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05tips/tips.html">Beyond the Basics</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Internet of Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="../07kernel/kernel.html">The Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08realtime/realtime.html">Real-Time I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09capes/capes.html">Capes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10parts/parts.html">Parts and Suppliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11misc/misc.html">Misc</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../pru-cookbook/index.html">PRU Cookbook</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/01case/case.html">Case Studies - Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/02start/start.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/03details/details.html">Running a Program; Configuring Pins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/04debug/debug.html">Debugging and Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/05blocks/blocks.html">Building Blocks - Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/06io/io.html">Accessing More I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/07more/more.html">More Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/08ai/ai.html">Moving to the BeagleBone AI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pru-cookbook/projects.html">PRU Projects</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
        <div class="sidebar-primary-item"><div class="card mb-3">
    <div class="card-header bg-primary text-light fw-bold">
        Why are we doing this?
    </div>
    <div class="card-body">
        <p class="card-text text-dark">
            We believe in making computers open again to democratize technology and empower individuals and organizations to explore, experiment, and create without the constraints of proprietary systems.
        </p>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header bg-warning text-dark fw-bold">
        What are we doing?
    </div>
    <div class="card-body">
        <p class="card-text text-dark">
            We design versatile and affordable single-board computers to provide developers, hobbyists, and educators with a platform for prototyping, experimentation, and production of embedded systems. Our comprehensive documentation, tutorials, and vibrant online community support users in their projects and foster knowledge sharing.
        </p>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header bg-success text-light fw-bold">
        How are we doing it?
    </div>
    <div class="card-body">
        <p class="card-text text-dark">
            Through open-source hardware designs, diverse software support, and active community engagement, we enable users to customize, innovate, and collaborate effortlessly in embedded computing.
        </p>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header bg-dark text-light fw-bold">
        Support us <i class="fa-solid fa-hand-holding-dollar"></i>
    </div>
    <div class="card-body">
        <p class="card-text text-dark">
            The BeagleBoard.org Foundation is a Michigan, USA-based 501(c)(3) non-profit corporation existing to provide education in and collaboration around the design and use of open-source software and hardware in embedded computing.
        </p>
    </div>
    <div class="card-footer d-grid gap-2">
        <a href="https://patreon.com/beagleboard" class="btn btn-danger text-light"><i class="fa-brands fa-patreon"></i> Become a Patreon</a>
        <a href="https://github.com/sponsors/beagleboard" class="btn btn-dark text-light"><i class="fa-brands fa-github"></i> Sponsor on GitHub</a>
    </div>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
<script>

document.addEventListener('DOMContentLoaded', () => {
    // Add primary sidebar toggle button
    const primarySidebar = document.getElementById('pst-primary-sidebar');
    if (primarySidebar) {
        addSidebarToggleButton(
            primarySidebar,
            'primary',
            'sidebar-toggle-btn',
            '<i class="fa-solid fa-caret-left"></i>',
            '<i class="fa-solid fa-caret-right"></i>',
            'after'
        );
    }

    // Add secondary sidebar toggle button
    const secondarySidebar = document.getElementById('pst-secondary-sidebar');
    if (secondarySidebar) {
        addSidebarToggleButton(
            secondarySidebar,
            'secondary',
            'sidebar-toggle-btn',
            '<i class="fa-solid fa-caret-right"></i>',
            '<i class="fa-solid fa-caret-left"></i>',
            'before'
        );
    }

    /**
     * Adds a toggle button for a sidebar with visibility and state management.
     * @param {HTMLElement} sidebar - The sidebar element to toggle.
     * @param {string} key - A unique key for localStorage and button id.
     * @param {string} buttonClass - CSS class for the toggle button.
     * @param {string} collapseHTML - HTML for the button when the sidebar is collapsed.
     * @param {string} expandHTML - HTML for the button when the sidebar is expanded.
     * @param {string} position - Position to insert the button ('before' or 'after').
     */
    function addSidebarToggleButton(sidebar, key, buttonClass, collapseHTML, expandHTML, position) {
        const toggleButton = document.createElement('button');
        toggleButton.id = `toggle-${key}-sidebar`;
        toggleButton.innerHTML = sidebar.classList.contains('collapsed') ? expandHTML : collapseHTML;
        toggleButton.className = buttonClass;

        // Insert the toggle button
        if (position === 'before') {
            sidebar.parentNode.insertBefore(toggleButton, sidebar);
        } else if (position === 'after') {
            sidebar.parentNode.insertBefore(toggleButton, sidebar.nextSibling);
        }

        // Restore collapsed state from localStorage
        const collapsedState = localStorage.getItem(`${key}SidebarCollapsed`) === 'true';
        if (collapsedState) {
            sidebar.classList.add('collapsed');
            toggleButton.innerHTML = expandHTML;
        }

        // Handle toggle button click
        toggleButton.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');

            // Update button content and save state
            if (sidebar.classList.contains('collapsed')) {
                toggleButton.innerHTML = expandHTML;
                localStorage.setItem(`${key}SidebarCollapsed`, 'true');
            } else {
                toggleButton.innerHTML = collapseHTML;
                localStorage.setItem(`${key}SidebarCollapsed`, 'false');
            }
        });

        // Check visibility of the toggle button
        function checkToggleVisibility() {
            const existingToggleButton = document.querySelector(
                `.pst-navbar-icon.sidebar-toggle.${key}-toggle`
            );
            if (existingToggleButton && existingToggleButton.offsetParent !== null) {
                toggleButton.style.display = 'none'; // Hide custom toggle button
            } else {
                toggleButton.style.display = 'block'; // Show custom toggle button
            }
        }

        // Update button visibility if the sidebar is removed
        function updateButtonVisibility() {
            if (window.getComputedStyle(sidebar).display === 'none') {
                toggleButton.remove(); // Remove button if sidebar is hidden
            } else if (!document.querySelector(`#toggle-${key}-sidebar`)) {
                // Re-add the button if missing
                if (position === 'before') {
                    sidebar.parentNode.insertBefore(toggleButton, sidebar);
                } else if (position === 'after') {
                    sidebar.parentNode.insertBefore(toggleButton, sidebar.nextSibling);
                }
            }
        }

        // Initial visibility check
        checkToggleVisibility();
        updateButtonVisibility();

        // Monitor window resize for dynamic button visibility updates
        window.addEventListener('resize', () => {
            checkToggleVisibility();
            updateButtonVisibility();
        });
    }
});

</script>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Books</a></li>
    
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">BeagleBone Cookbook</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Internet of Things</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="internet-of-things">
<span id="beaglebone-cookbook-iot"></span><h1>Internet of Things<a class="headerlink" href="#internet-of-things" title="Link to this heading">#</a></h1>
<p>You can easily connect BeagleBone Black to the Internet via a wire (<a class="reference internal" href="../05tips/tips.html#networking-wired"><span class="std std-ref">Establishing an Ethernet-Based Internet Connection</span></a>), wirelessly
(<a class="reference internal" href="../05tips/tips.html#networking-wireless"><span class="std std-ref">Establishing a WiFi-Based Internet Connection</span></a>), or through the USB to a host and then to the Internet (<a class="reference internal" href="../05tips/tips.html#networking-usb"><span class="std std-ref">Sharing the Host’s Internet Connection over USB</span></a>).
Either way, it opens up a world of possibilities for the “Internet of Things” (IoT).</p>
<p>Now that you’re online, this chapter offers various things to do with your connection.</p>
<section id="accessing-your-host-computer-s-files-on-the-bone">
<h2>Accessing Your Host Computer’s Files on the Bone<a class="headerlink" href="#accessing-your-host-computer-s-files-on-the-bone" title="Link to this heading">#</a></h2>
<section id="problem">
<h3>Problem<a class="headerlink" href="#problem" title="Link to this heading">#</a></h3>
<p>You want to access a file on a Linux host computer that’s attached to the Bone.</p>
</section>
<section id="solution">
<h3>Solution<a class="headerlink" href="#solution" title="Link to this heading">#</a></h3>
<p>If you are running Linux on a host computer attached to BeagleBone Black,
it’s not hard to mount the Bone’s files on the host or the host’s files on the
Bone by using <em>sshfs</em>. Suppose that you want to access files on the host from
the Bone. First, install <em>sshfs</em>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>sshfs
</pre></div>
</div>
<p>Now, mount the files to an empty directory (substitute your username on the host
computer for <em>username</em> and the IP address of the host for <em>192.168.7.1</em>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>mkdir<span class="w"> </span>host
bone$<span class="w"> </span>sshfs<span class="w"> </span>username@<span class="nv">$192</span>.168.7.1:.<span class="w"> </span>host
bone$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>host
bone$<span class="w"> </span>ls
</pre></div>
</div>
<p>The <em>ls</em> command will now list the files in your home directory on your host computer.
You can edit them as if they were local to the Bone. You can access all the
files by substituting <em>:/</em> for the <em>:.</em> following the IP address.</p>
<p>You can go the other way, too. Suppose that you are on your
Linux host computer and want to access files on your Bone. Install <em>sshfs</em>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>host$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>sshfs
</pre></div>
</div>
<p>and then access:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>host$<span class="w"> </span>mkdir<span class="w"> </span>/mnt/bone
host$<span class="w"> </span>sshfs<span class="w"> </span>debian@<span class="nv">$192</span>.168.7.2:/<span class="w"> </span>/mnt/bone
host$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/mnt/bone
host$<span class="w"> </span>ls
</pre></div>
</div>
<p>Here, we are accessing the files on the Bone as <em>debian</em>. We’ve mounted the entire file system,
starting with <em>/</em>, so you can access any file. Of course, with great power comes great responsibility, so be careful.</p>
<p>The <em>sshfs</em> command gives you easy access from one computer to another.
When you are done, you can unmount the files by using the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>host$<span class="w"> </span>umount<span class="w"> </span>/mnt/bone
bone$<span class="w"> </span>umount<span class="w"> </span>home
</pre></div>
</div>
</section>
</section>
<section id="serving-web-pages-from-the-bone">
<span id="networking-builtin-server"></span><h2>Serving Web Pages from the Bone<a class="headerlink" href="#serving-web-pages-from-the-bone" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>Problem<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>You want to use BeagleBone Black as a web server.</p>
</section>
<section id="id2">
<h3>Solution<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>BeagleBone Black already has the <em>nginx</em> web server running.</p>
<p>When you point your browser to <em>192.168.7.2</em>, you are using the <em>nginx</em> web server.
The web pages are served from <em>/var/www/html/</em>. Add the HTML in <a class="reference internal" href="#networking-index-html"><span class="std std-ref">A sample web page (test.html)</span></a>
to a file called <em>/var/www/html/test.html</em>, and then point your browser to <em>192.168.7.2:/test.html</em>.</p>
<div class="literal-block-wrapper docutils container" id="id27">
<span id="networking-index-html"></span><div class="code-block-caption"><span class="caption-number">Listing 56 </span><span class="caption-text">A sample web page (test.html)</span><a class="headerlink" href="#id27" title="Link to this code">#</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos"> 2</span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos"> 3</span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>My First Heading<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>My first paragraph.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos">10</span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/2f102a590dbda5d8e408740a1d801e38/test.html"><code class="xref download docutils literal notranslate"><span class="pre">test.html</span></code></a></p>
<p>You will see the web page shown in <a class="reference internal" href="#networking-node-page"><span class="std std-ref">test.html as served by nginx</span></a>.</p>
<figure class="align-center" id="id28">
<span id="networking-node-page"></span><img alt="test.html served by nginx" src="../../../_images/nginxTest.png" />
<figcaption>
<p><span class="caption-number">Fig. 685 </span><span class="caption-text">test.html as served by nginx</span><a class="headerlink" href="#id28" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="interacting-with-the-bone-via-a-web-browser">
<span id="networking-nodejs"></span><h2>Interacting with the Bone via a Web Browser<a class="headerlink" href="#interacting-with-the-bone-via-a-web-browser" title="Link to this heading">#</a></h2>
<section id="id3">
<h3>Problem<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>BeagleBone Black is interacting with the physical world nicely and you want to display that information on a web browser.</p>
</section>
<section id="id4">
<h3>Solution<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://www.fullstackpython.com/flask.html">Flask</a> is a Python web framework built
with a small core and easy-to-extend philosophy. <a class="reference internal" href="#networking-builtin-server"><span class="std std-ref">Serving Web Pages from the Bone</span></a>
shows how to use nginx, the web server that’s already running. This recipe shows how
easy it is to build your own server. This is an adaptation of
<a class="reference external" href="https://towardsdatascience.com/python-webserver-with-flask-and-raspberry-pi-398423cc6f5d">Python WebServer With Flask and Raspberry Pi</a>.</p>
<p>First, install flask:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>update
bone$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python3-flask
</pre></div>
</div>
<p>All the code in is the Cookbook repo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://git.beagleboard.org/beagleboard/beaglebone-cookbook-code
bone$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>beaglebone-cookbook-code/06iot/flask
</pre></div>
</div>
</section>
</section>
<section id="first-flask-hello-world">
<h2>First Flask - hello, world<a class="headerlink" href="#first-flask-hello-world" title="Link to this heading">#</a></h2>
<p>Our first example is <em>helloWorld.py</em></p>
<div class="literal-block-wrapper docutils container" id="id29">
<span id="flask-hello-world"></span><div class="code-block-caption"><span class="caption-number">Listing 57 </span><span class="caption-text">Python code for flask hello world (helloWorld.py)</span><a class="headerlink" href="#id29" title="Link to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># From: https://towardsdatascience.com/python-webserver-with-flask-and-raspberry-pi-398423cc6f5d</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="linenos"> 5</span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
<span class="linenos"> 8</span>    <span class="k">return</span> <span class="s1">&#39;hello, world&#39;</span>
<span class="linenos"> 9</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">10</span>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/05a593c1ce2222c612874a71a126fa88/helloWorld.py"><code class="xref download docutils literal notranslate"><span class="pre">helloWorld.py</span></code></a></p>
<ol class="arabic simple">
<li><p>The first line loads the Flask module into your Python script.</p></li>
<li><p>The second line creates a Flask object called <code class="docutils literal notranslate"><span class="pre">app</span></code>.</p></li>
<li><p>The third line is where the action is, it says to run the index() function when someone accesses the root URL (‘/’) of the server. In this case, send the text “hello, world” to the client’s web browser via return.</p></li>
<li><p>The last line says to “listen” on port 8080, reporting any errors.</p></li>
</ol>
<p>Now on your host computer, browse to 192.168.7.2:8080 flask an you should see.</p>
<figure class="align-center" id="id30">
<span id="flask-flaskserver"></span><img alt="Test page" src="../../../_images/flaskServer.png" />
<figcaption>
<p><span class="caption-number">Fig. 686 </span><span class="caption-text">Test page served by our custom flask server</span><a class="headerlink" href="#id30" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="adding-a-template">
<h2>Adding a template<a class="headerlink" href="#adding-a-template" title="Link to this heading">#</a></h2>
<p>Let’s improve our “hello, world” application, by using an HTML template and a
CSS file for styling our page.  Note: these have been created for you in the
“templates” sub-folder. So, we will create a file named <em>index1.html</em>,
that has been saved in <em>/templates</em>.</p>
<p>Here’s what’s in <em>templates/index1.html</em>:</p>
<div class="literal-block-wrapper docutils container" id="id31">
<span id="flask-index1"></span><div class="code-block-caption"><span class="caption-number">Listing 58 </span><span class="caption-text">index1.html</span><a class="headerlink" href="#id31" title="Link to this code">#</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos">2</span>   <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos">3</span>      <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos">4</span>   <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos">5</span>   <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos">6</span>      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello, World!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos">7</span>      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>The date and time on the server is: {{ time }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="linenos">8</span>   <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos">9</span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/39f47d114e85797c808169111198c65a/index1.html"><code class="xref download docutils literal notranslate"><span class="pre">index1.html</span></code></a></p>
<p>Note: a style sheet (style.css) is also included. This will be populated later.</p>
<p>Observe that anything in double curly braces within the HTML template is interpreted
as a variable that would be passed to it from the Python script via the render_template
function. Now, let’s create a new Python script. We will name it app1.py:</p>
<div class="literal-block-wrapper docutils container" id="id32">
<span id="flask-app1"></span><div class="code-block-caption"><span class="caption-number">Listing 59 </span><span class="caption-text">app1.py</span><a class="headerlink" href="#id32" title="Link to this code">#</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># From: https://towardsdatascience.com/python-webserver-with-flask-and-raspberry-pi-398423cc6f5d</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="sd">&#39;&#39;&#39;</span>
<span class="linenos"> 5</span><span class="sd">Code created by Matt Richardson </span>
<span class="linenos"> 6</span><span class="sd">for details, visit:  http://mattrichardson.com/Raspberry-Pi-Flask/inde...</span>
<span class="linenos"> 7</span><span class="sd">&#39;&#39;&#39;</span>
<span class="linenos"> 8</span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="linenos"> 9</span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="linenos">10</span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="linenos">11</span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="linenos">12</span><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
<span class="linenos">13</span>   <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="linenos">14</span>   <span class="n">timeString</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M&quot;</span><span class="p">)</span>
<span class="linenos">15</span>   <span class="n">templateData</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">16</span>      <span class="s1">&#39;title&#39;</span> <span class="p">:</span> <span class="s1">&#39;HELLO!&#39;</span><span class="p">,</span>
<span class="linenos">17</span>      <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">timeString</span>
<span class="linenos">18</span>      <span class="p">}</span>
<span class="linenos">19</span>   <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index1.html&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">templateData</span><span class="p">)</span>
<span class="linenos">20</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">21</span>   <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">22</span>  
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/21dcfdfa244bef8c96ac8324bb4034f2/app1.py"><code class="xref download docutils literal notranslate"><span class="pre">app1.py</span></code></a></p>
<p>Note that we create a formatted string (“timeString”) using the date and time from the “now” object,
that has the current time stored on it.</p>
<p>Next important thing on the above code, is that we created a dictionary of variables
(a set of keys, such as the title that is associated with values, such as HELLO!)
to pass into the template.
On “return”, we will return the <em>index1.html</em> template to the web browser using
the variables in the <em>templateData</em> dictionary.</p>
<p>Execute the Python script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>.<span class="se">\a</span>pp.py
</pre></div>
</div>
<p>Open any web browser and browse to 192.168.7.2:8080. You should see:</p>
<figure class="align-center" id="id33">
<span id="flask-app1-fig"></span><img alt="app1.py" src="../../../_images/flaskapp1.png" />
<figcaption>
<p><span class="caption-number">Fig. 687 </span><span class="caption-text">Test page served by app1.py</span><a class="headerlink" href="#id33" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Note that the page’s content changes dynamically any time that you refresh
it with the actual variable data passed by Python script. In our case,
“title” is a fixed value, but “time” changes every minute.</p>
</section>
<section id="displaying-gpio-status-in-a-web-browser-reading-a-button">
<h2>Displaying GPIO Status in a Web Browser - reading a button<a class="headerlink" href="#displaying-gpio-status-in-a-web-browser-reading-a-button" title="Link to this heading">#</a></h2>
<section id="id5">
<h3>Problem<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>You want a web page to display the status of a GPIO pin.</p>
</section>
<section id="id6">
<h3>Solution<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p>This solution builds on the Flask-based web server solution in <a class="reference internal" href="#networking-nodejs"><span class="std std-ref">Interacting with the Bone via a Web Browser</span></a>.</p>
<p>To make this recipe, you will need:</p>
<ul class="simple">
<li><p>Breadboard and jumper wires.</p></li>
<li><p>Pushbutton switch.</p></li>
</ul>
<p>Wire your pushbutton as shown in <a class="reference internal" href="../02sensors/sensors.html#js-pushbutton-fig"><span class="std std-ref">Diagram for wiring a pushbutton and magnetic reed switch input</span></a>.
Wire a button to <em>P9_11</em> and have the web page display the value of the button.</p>
<p>Let’s use a new Python script named <em>app2.py</em>.</p>
<div class="literal-block-wrapper docutils container" id="id34">
<span id="flask-app2"></span><div class="code-block-caption"><span class="caption-number">Listing 60 </span><span class="caption-text">A simple Flask-based web server to read a GPIO (app2.py)</span><a class="headerlink" href="#id34" title="Link to this code">#</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># From: https://towardsdatascience.com/python-webserver-with-flask-and-raspberry-pi-398423cc6f5d</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">os</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="linenos"> 5</span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">pin</span> <span class="o">=</span> <span class="s1">&#39;30&#39;</span> <span class="c1">#  P9_11 is gpio 30</span>
<span class="linenos"> 8</span><span class="n">GPIOPATH</span><span class="o">=</span><span class="s2">&quot;/sys/class/gpio&quot;</span>
<span class="linenos"> 9</span><span class="n">buttonSts</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c1"># Make sure pin is exported</span>
<span class="linenos">12</span><span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="p">)):</span>
<span class="linenos">13</span>    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/export&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">14</span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
<span class="linenos">15</span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c1"># Make it an input pin</span>
<span class="linenos">18</span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="o">+</span><span class="s2">&quot;/direction&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="linenos">23</span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
<span class="linenos">24</span>	<span class="c1"># Read Button Status</span>
<span class="linenos">25</span>	<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="o">+</span><span class="s2">&quot;/value&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="linenos">26</span>	<span class="n">buttonSts</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos">27</span>	<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">28</span>
<span class="linenos">29</span>	<span class="c1"># buttonSts = GPIO.input(button)</span>
<span class="linenos">30</span>	<span class="n">templateData</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">31</span>      <span class="s1">&#39;title&#39;</span> <span class="p">:</span> <span class="s1">&#39;GPIO input Status!&#39;</span><span class="p">,</span>
<span class="linenos">32</span>      <span class="s1">&#39;button&#39;</span>  <span class="p">:</span> <span class="n">buttonSts</span><span class="p">,</span>
<span class="linenos">33</span>      <span class="p">}</span>
<span class="linenos">34</span>	<span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index2.html&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">templateData</span><span class="p">)</span>
<span class="linenos">35</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">36</span>   <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/b274ad7d944450ac8af8475a9abe7748/app2.py"><code class="xref download docutils literal notranslate"><span class="pre">app2.py</span></code></a></p>
<p>What we are doing is defining the button on <em>P9_11</em> as input, reading its value and
storing it in <em>buttonSts</em>. Inside the function <em>index()</em>, we will pass that value to our web
page through “button” that is part of our variable dictionary: <em>templateData</em>.</p>
<p>Let’s also see the new <em>index2.html</em> to show the GPIO status:</p>
<div class="literal-block-wrapper docutils container" id="id35">
<span id="flask-index2"></span><div class="code-block-caption"><span class="caption-number">Listing 61 </span><span class="caption-text">A simple Flask-based web server to read a GPIO (index2.html)</span><a class="headerlink" href="#id35" title="Link to this code">#</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos"> 2</span>   <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos"> 3</span>      <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos"> 4</span>      <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;../static/style.css&#39;</span><span class="p">/&gt;</span>
<span class="linenos"> 5</span>   <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos"> 6</span>   <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos"> 7</span>	  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos"> 8</span>      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Button pressed:  {{ button }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos"> 9</span>   <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos">10</span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/4ff36444cec756c9da0376f65b6c65a4/index2.html"><code class="xref download docutils literal notranslate"><span class="pre">index2.html</span></code></a></p>
<p>Now, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>./app2.py
</pre></div>
</div>
<p>Point your browser to <cite>http://192.168.7.2:8080</cite>, and the
page will look like <a class="reference internal" href="#flask-app2-fig"><span class="std std-ref">Status of a GPIO pin on a web page</span></a>.</p>
<figure class="align-center" id="id36">
<span id="flask-app2-fig"></span><img alt="GPIO status" src="../../../_images/flaskapp2.png" />
<figcaption>
<p><span class="caption-number">Fig. 688 </span><span class="caption-text">Status of a GPIO pin on a web page</span><a class="headerlink" href="#id36" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Currently, the <em>0</em> shows that the button isn’t pressed.
Try refreshing the page while pushing the button, and you will see <em>1</em> displayed.</p>
<p>It’s not hard to assemble your own HTML with the GPIO data. It’s an easy extension to write a program to display the status of all the GPIO pins.</p>
</section>
</section>
<section id="controlling-gpios">
<h2>Controlling GPIOs<a class="headerlink" href="#controlling-gpios" title="Link to this heading">#</a></h2>
<section id="id7">
<h3>Problem<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<p>You want to control an LED attached to a GPIO pin.</p>
</section>
<section id="id8">
<h3>Solution<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>Now that we know how to “read” GPIO Status, let’s change them. What we will do will control the LED via
the web page. We have an LED connected to <em>P9_14</em>. Controlling remotely we will change
its status from LOW to HIGH and vice-versa.</p>
<p>Create a new Python script and name it <em>app3.py</em>.</p>
<div class="literal-block-wrapper docutils container" id="id37">
<span id="flask-app3"></span><div class="code-block-caption"><span class="caption-number">Listing 62 </span><span class="caption-text">A simple Flask-based web server to read a GPIO (app3.py)</span><a class="headerlink" href="#id37" title="Link to this code">#</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># From: https://towardsdatascience.com/python-webserver-with-flask-and-raspberry-pi-398423cc6f5d</span>
<span class="linenos"> 3</span><span class="c1"># import Adafruit_BBIO.GPIO as GPIO</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">os</span>
<span class="linenos"> 5</span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span>
<span class="linenos"> 6</span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="c1">#define LED GPIO</span>
<span class="linenos"> 8</span><span class="n">ledRed</span> <span class="o">=</span> <span class="s2">&quot;P9_14&quot;</span>
<span class="linenos"> 9</span><span class="n">pin</span> <span class="o">=</span> <span class="s1">&#39;50&#39;</span> <span class="c1">#  P9_14 is gpio 50</span>
<span class="linenos">10</span><span class="n">GPIOPATH</span><span class="o">=</span><span class="s2">&quot;/sys/class/gpio&quot;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="c1">#initialize GPIO status variable</span>
<span class="linenos">13</span><span class="n">ledRedSts</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">14</span><span class="c1"># Make sure pin is exported</span>
<span class="linenos">15</span><span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="p">)):</span>
<span class="linenos">16</span>    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/export&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">17</span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
<span class="linenos">18</span>    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">19</span><span class="c1"># Define led pin as output</span>
<span class="linenos">20</span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="o">+</span><span class="s2">&quot;/direction&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;out&quot;</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">23</span><span class="c1"># turn led OFF </span>
<span class="linenos">24</span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="o">+</span><span class="s2">&quot;/value&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="linenos">29</span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
<span class="linenos">30</span>	<span class="c1"># Read Sensors Status</span>
<span class="linenos">31</span>	<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="o">+</span><span class="s2">&quot;/value&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="linenos">32</span>	<span class="n">ledRedSts</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="linenos">33</span>	<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">34</span>	<span class="n">templateData</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">35</span>              <span class="s1">&#39;title&#39;</span> <span class="p">:</span> <span class="s1">&#39;GPIO output Status!&#39;</span><span class="p">,</span>
<span class="linenos">36</span>              <span class="s1">&#39;ledRed&#39;</span>  <span class="p">:</span> <span class="n">ledRedSts</span><span class="p">,</span>
<span class="linenos">37</span>        <span class="p">}</span>
<span class="linenos">38</span>	<span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index3.html&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">templateData</span><span class="p">)</span>
<span class="linenos">39</span>	
<span class="linenos">40</span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/&lt;deviceName&gt;/&lt;action&gt;&quot;</span><span class="p">)</span>
<span class="linenos">41</span><span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="n">deviceName</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
<span class="linenos">42</span>	<span class="k">if</span> <span class="n">deviceName</span> <span class="o">==</span> <span class="s1">&#39;ledRed&#39;</span><span class="p">:</span>
<span class="linenos">43</span>		<span class="n">actuator</span> <span class="o">=</span> <span class="n">ledRed</span>
<span class="linenos">44</span>	<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="o">+</span><span class="s2">&quot;/value&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">45</span>	<span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;on&quot;</span><span class="p">:</span>
<span class="linenos">46</span>		<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
<span class="linenos">47</span>	<span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;off&quot;</span><span class="p">:</span>
<span class="linenos">48</span>		<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
<span class="linenos">49</span>	<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">50</span>		     
<span class="linenos">51</span>	<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">GPIOPATH</span><span class="o">+</span><span class="s2">&quot;/gpio&quot;</span><span class="o">+</span><span class="n">pin</span><span class="o">+</span><span class="s2">&quot;/value&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="linenos">52</span>	<span class="n">ledRedSts</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="linenos">53</span>	<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">54</span>
<span class="linenos">55</span>	<span class="n">templateData</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">56</span>              <span class="s1">&#39;ledRed&#39;</span>  <span class="p">:</span> <span class="n">ledRedSts</span><span class="p">,</span>
<span class="linenos">57</span>	<span class="p">}</span>
<span class="linenos">58</span>	<span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index3.html&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">templateData</span><span class="p">)</span>
<span class="linenos">59</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">60</span>   <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/77060357941e35eca52269a9e8b188af/app3.py"><code class="xref download docutils literal notranslate"><span class="pre">app3.py</span></code></a></p>
<p>What we have new on above code is the new “route”:</p>
<p>&#64;app.route(“/&lt;deviceName&gt;/&lt;action&gt;”)</p>
<p>From the webpage, calls will be generated with the format:</p>
<p><a class="reference external" href="http://192.168.7.2:8081/ledRed/on">http://192.168.7.2:8081/ledRed/on</a></p>
<p>or</p>
<p><a class="reference external" href="http://192.168.7.2:8081/ledRed/off">http://192.168.7.2:8081/ledRed/off</a></p>
<p>For the above example, <em>ledRed</em> is the “deviceName” and <em>on</em> or <em>off</em> are examples of
possible “action”. Those routes will be identified and properly “worked”. The main steps are:</p>
<ul class="simple">
<li><p>Convert the string “ledRED”, for example, on its equivalent GPIO pin. The integer variable ledRed is equivalent to P9_14. We store this value on variable “actuator”</p></li>
<li><p>For each actuator, we will analyze the “action”, or “command” and act properly.
If “action = on” for example, we must use the command: <code class="docutils literal notranslate"><span class="pre">f.write(&quot;1&quot;)</span></code></p></li>
<li><p>Update the status of each actuator</p></li>
<li><p>Return the data to index.html</p></li>
</ul>
<p>Let’s now create an <em>index.html</em> to show the GPIO status of each
actuator and more importantly, create “buttons” to send the commands:</p>
<div class="literal-block-wrapper docutils container" id="id38">
<span id="flask-index3"></span><div class="code-block-caption"><span class="caption-number">Listing 63 </span><span class="caption-text">A simple Flask-based web server to write a GPIO (index3.html)</span><a class="headerlink" href="#id38" title="Link to this code">#</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos"> 2</span>   <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos"> 3</span>      <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>GPIO Control<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos"> 4</span>      <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;../static/style.css&#39;</span><span class="p">/&gt;</span>
<span class="linenos"> 5</span>   <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos"> 6</span>   <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos"> 7</span>		<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Actuators<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="linenos"> 8</span>		<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span> Status <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="linenos"> 9</span>		     RED LED ==&gt;  {{ ledRed  }}
<span class="linenos">10</span>		<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="linenos">11</span>		<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span> Commands <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="linenos">12</span>			RED LED Ctrl ==&gt; 
<span class="linenos">13</span>			<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/ledRed/on&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;button&quot;</span><span class="p">&gt;</span>TURN ON<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>  
<span class="linenos">14</span>			<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/ledRed/off&quot;</span><span class="na">class</span><span class="o">=</span><span class="s">&quot;button&quot;</span><span class="p">&gt;</span>TURN OFF<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="linenos">15</span>   <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos">16</span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/faf7113f6e7602fd1ec8ba758bb9fa2a/index3.html"><code class="xref download docutils literal notranslate"><span class="pre">index3.html</span></code></a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>./app3.py
</pre></div>
</div>
<p>Point your browser as before and you will see:</p>
<p id="flask-app3-fig">Status of a GPIO pin on a web page</p>
<figure class="align-center">
<img alt="Control LED" src="../../../_images/flaskapp3.png" />
</figure>
<p>Try clicking the “TURN ON” and “TURN OFF” buttons and your LED will respond.</p>
<p><em>app4.py</em> and <em>app5.py</em> combine the previous apps.  Try them out.</p>
<p><a class="reference download internal" download="" href="../../../_downloads/e4d7dee2447588b04a258f7cdf4e4a1d/app4.py"><code class="xref download docutils literal notranslate"><span class="pre">app4.py</span></code></a>
<a class="reference download internal" download="" href="../../../_downloads/29741318a6c608b3ea2986046ddd81a8/app5.py"><code class="xref download docutils literal notranslate"><span class="pre">app5.py</span></code></a></p>
</section>
</section>
<section id="plotting-data">
<h2>Plotting Data<a class="headerlink" href="#plotting-data" title="Link to this heading">#</a></h2>
<section id="id9">
<h3>Problem<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>You have live, continuous,  data coming into your Bone via one of the Analog Ins, and you want to plot it.</p>
</section>
<section id="id10">
<h3>Solution<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<section id="analog-in-continuous">
<h4>Analog in - Continuous<a class="headerlink" href="#analog-in-continuous" title="Link to this heading">#</a></h4>
<p>(This is based on information at: <a class="reference external" href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/Foundational_Components/Kernel/Kernel_Drivers/ADC.html#Continuous%20Mode">http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/Foundational_Components/Kernel/Kernel_Drivers/ADC.html#Continuous%20Mode</a>)</p>
<p>Reading a continuous analog signal requires some set up. First go to the iio devices directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/sys/bus/iio/devices/iio:device0
bone$<span class="w"> </span>ls<span class="w"> </span>-F
buffer/<span class="w">  </span>in_voltage0_raw<span class="w">  </span>in_voltage2_raw<span class="w">  </span>in_voltage4_raw<span class="w">  </span>in_voltage6_raw<span class="w">  </span>name<span class="w">      </span>power/<span class="w">          </span>subsystem@
dev<span class="w">      </span>in_voltage1_raw<span class="w">  </span>in_voltage3_raw<span class="w">  </span>in_voltage5_raw<span class="w">  </span>in_voltage7_raw<span class="w">  </span>of_node@<span class="w">  </span>scan_elements/<span class="w">  </span>uevent
</pre></div>
</div>
<p>Here you see the files used to read the one shot values.
Look in <em>scan_elements</em> to see how to enable continuous input.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>ls<span class="w"> </span>scan_elements
in_voltage0_en<span class="w">     </span>in_voltage1_index<span class="w">  </span>in_voltage2_type<span class="w">   </span>in_voltage4_en<span class="w">     </span>in_voltage5_index<span class="w">  </span>in_voltage6_type
in_voltage0_index<span class="w">  </span>in_voltage1_type<span class="w">   </span>in_voltage3_en<span class="w">     </span>in_voltage4_index<span class="w">  </span>in_voltage5_type<span class="w">   </span>in_voltage7_en
in_voltage0_type<span class="w">   </span>in_voltage2_en<span class="w">     </span>in_voltage3_index<span class="w">  </span>in_voltage4_type<span class="w">   </span>in_voltage6_en<span class="w">     </span>in_voltage7_index
in_voltage1_en<span class="w">     </span>in_voltage2_index<span class="w">  </span>in_voltage3_type<span class="w">   </span>in_voltage5_en<span class="w">     </span>in_voltage6_index<span class="w">  </span>in_voltage7_type
</pre></div>
</div>
<dl class="simple">
<dt>Here you see three values for each analog input, _en (enable),</dt><dd><p>_index (index of this channel in the buffer’s chunks) and
_type (how the ADC stores its data). (See the link above for details.)
Let’s use the input at <em>P9.40</em> which is <em>AIN1</em>. To enable this input:</p>
</dd>
</dl>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>scan_elements/in_voltage1_en
</pre></div>
</div>
<p>Next set the buffer size.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>ls<span class="w"> </span>buffer
data_available<span class="w">  </span><span class="nb">enable</span><span class="w">  </span>length<span class="w">  </span>watermark
</pre></div>
</div>
<p>Let’s use a 512 sample buffer. You might need to experiment with this.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">512</span><span class="w"> </span>&gt;<span class="w"> </span>buffer/length

Then<span class="w"> </span>start<span class="w"> </span>it<span class="w"> </span>running.
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>buffer/enable

Now,<span class="w"> </span>just<span class="w"> </span><span class="nb">read</span><span class="w"> </span>from<span class="w"> </span>*/dev/iio:device0*.
</pre></div>
</div>
<figure class="align-center" id="id39">
<span id="analog-sine-fig"></span><img alt="1KHz sine wave sampled at 8KHz" src="../../../_images/Sine1k.png" />
<figcaption>
<p><span class="caption-number">Fig. 689 </span><span class="caption-text">1KHz sine wave sampled at 8KHz</span><a class="headerlink" href="#id39" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>An example Python program that does the above and reads and
plots the buffer is <strong>analogInContinuous.py</strong>.</p>
<div class="literal-block-wrapper docutils container" id="id40">
<span id="analog-code"></span><div class="code-block-caption"><span class="caption-number">Listing 64 </span><span class="caption-text">Code to read and plot a continuous analog input(analogInContinuous.py)</span><a class="headerlink" href="#id40" title="Link to this code">#</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/python</span>
<span class="linenos"> 2</span><span class="c1">#//////////////////////////////////////</span>
<span class="linenos"> 3</span><span class="c1">#	analogInContinuous.py</span>
<span class="linenos"> 4</span><span class="c1"># 	Read analog data via IIO continuous mode and plots it.</span>
<span class="linenos"> 5</span><span class="c1">#//////////////////////////////////////</span>
<span class="linenos"> 6</span><span class="c1"># From: https://stackoverflow.com/questions/20295646/python-ascii-plots-in-terminal</span>
<span class="linenos"> 7</span><span class="c1"># https://github.com/dkogan/gnuplotlib</span>
<span class="linenos"> 8</span><span class="c1"># https://github.com/dkogan/gnuplotlib/blob/master/guide/guide.org</span>
<span class="linenos"> 9</span><span class="c1"># sudo apt install gnuplot  (10 minute to install)</span>
<span class="linenos">10</span><span class="c1"># sudo apt install libatlas-base-dev</span>
<span class="linenos">11</span><span class="c1"># pip3 install gnuplotlib</span>
<span class="linenos">12</span><span class="c1"># This uses X11, so when connecting to the bone from the host use:  ssh -X bone</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="c1"># See https://elinux.org/index.php?title=EBC_Exercise_10a_Analog_In#Analog_in_-_Continuous.2C_Change_the_sample_rate</span>
<span class="linenos">15</span><span class="c1"># for instructions on changing the sampling rate.  Can go up to 200KHz.</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">IIODEV</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="kn">import</span> <span class="nn">numpy</span>      <span class="k">as</span> <span class="nn">np</span>
<span class="linenos">19</span><span class="kn">import</span> <span class="nn">gnuplotlib</span> <span class="k">as</span> <span class="nn">gp</span>
<span class="linenos">20</span><span class="kn">import</span> <span class="nn">time</span>
<span class="linenos">21</span><span class="c1"># import struct</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">IIOPATH</span><span class="o">=</span><span class="s1">&#39;/sys/bus/iio/devices/iio:device0&#39;</span>
<span class="linenos">24</span><span class="n">IIODEV</span><span class="o">=</span><span class="s1">&#39;/dev/iio:device0&#39;</span>
<span class="linenos">25</span><span class="n">LEN</span> <span class="o">=</span> <span class="mi">100</span>
<span class="linenos">26</span><span class="n">SAMPLERATE</span><span class="o">=</span><span class="mi">8000</span>
<span class="linenos">27</span><span class="n">AIN</span><span class="o">=</span><span class="s1">&#39;2&#39;</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="c1"># Setup IIO for Continous reading</span>
<span class="linenos">30</span><span class="c1"># Enable AIN</span>
<span class="linenos">31</span><span class="k">try</span><span class="p">:</span>
<span class="linenos">32</span>    <span class="n">file1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">IIOPATH</span><span class="o">+</span><span class="s1">&#39;/scan_elements/in_voltage&#39;</span><span class="o">+</span><span class="n">AIN</span><span class="o">+</span><span class="s1">&#39;_en&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="linenos">33</span>    <span class="n">file1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span> 
<span class="linenos">34</span>    <span class="n">file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">35</span><span class="k">except</span><span class="p">:</span>     <span class="c1"># carry on if it&#39;s already enabled</span>
<span class="linenos">36</span>    <span class="k">pass</span>
<span class="linenos">37</span><span class="c1"># Set buffer length</span>
<span class="linenos">38</span><span class="n">file1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">IIOPATH</span><span class="o">+</span><span class="s1">&#39;/buffer/length&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="linenos">39</span><span class="n">file1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">LEN</span><span class="p">))</span>     <span class="c1"># I think LEN is in 16-bit values, but here we pass bytes</span>
<span class="linenos">40</span><span class="n">file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">41</span><span class="c1"># Enable continuous</span>
<span class="linenos">42</span><span class="n">file1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">IIOPATH</span><span class="o">+</span><span class="s1">&#39;/buffer/enable&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="linenos">43</span><span class="n">file1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="linenos">44</span><span class="n">file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">45</span>
<span class="linenos">46</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="o">*</span><span class="n">LEN</span><span class="o">/</span><span class="n">SAMPLERATE</span><span class="p">,</span> <span class="n">LEN</span><span class="p">)</span>
<span class="linenos">47</span><span class="c1"># Do a dummy plot to give time of the fonts to load.</span>
<span class="linenos">48</span><span class="n">gp</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="linenos">49</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Waiting for fonts to load&quot;</span><span class="p">)</span>
<span class="linenos">50</span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hit ^C to stop&#39;</span><span class="p">)</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">IIODEV</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="k">try</span><span class="p">:</span>
<span class="linenos">57</span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">58</span>        <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;uint16&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">LEN</span><span class="p">)</span><span class="o">*</span><span class="mf">1.8</span><span class="o">/</span><span class="mi">4096</span>
<span class="linenos">59</span>        <span class="c1"># print(y)</span>
<span class="linenos">60</span>        <span class="n">gp</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span>
<span class="linenos">61</span>            <span class="n">xlabel</span> <span class="o">=</span> <span class="s1">&#39;t (ms)&#39;</span><span class="p">,</span>
<span class="linenos">62</span>            <span class="n">ylabel</span> <span class="o">=</span> <span class="s1">&#39;volts&#39;</span><span class="p">,</span>
<span class="linenos">63</span>            <span class="n">_yrange</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="linenos">64</span>            <span class="n">title</span>  <span class="o">=</span> <span class="s1">&#39;analogInContinuous&#39;</span><span class="p">,</span>
<span class="linenos">65</span>            <span class="n">legend</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="p">(</span><span class="s2">&quot;P9.39&quot;</span><span class="p">,</span> <span class="p">),</span> <span class="p">),</span>
<span class="linenos">66</span>            <span class="c1"># ascii=1,</span>
<span class="linenos">67</span>            <span class="c1"># terminal=&quot;xterm&quot;,</span>
<span class="linenos">68</span>            <span class="c1"># legend = np.array( (&quot;P9.40&quot;, &quot;P9.38&quot;), ),</span>
<span class="linenos">69</span>            <span class="c1"># _with  = &#39;lines&#39;</span>
<span class="linenos">70</span>            <span class="p">)</span>
<span class="linenos">71</span>
<span class="linenos">72</span><span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="linenos">73</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Turning off input.&quot;</span><span class="p">)</span>
<span class="linenos">74</span>    <span class="c1"># Disable continuous</span>
<span class="linenos">75</span>    <span class="n">file1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">IIOPATH</span><span class="o">+</span><span class="s1">&#39;/buffer/enable&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="linenos">76</span>    <span class="n">file1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="linenos">77</span>    <span class="n">file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">78</span>    
<span class="linenos">79</span>    <span class="n">file1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">IIOPATH</span><span class="o">+</span><span class="s1">&#39;/scan_elements/in_voltage&#39;</span><span class="o">+</span><span class="n">AIN</span><span class="o">+</span><span class="s1">&#39;_en&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="linenos">80</span>    <span class="n">file1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span> 
<span class="linenos">81</span>    <span class="n">file1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">82</span>
<span class="linenos">83</span><span class="c1"># // Bone  | Pocket | AIN</span>
<span class="linenos">84</span><span class="c1"># // ----- | ------ | --- </span>
<span class="linenos">85</span><span class="c1"># // P9_39 | P1_19  | 0</span>
<span class="linenos">86</span><span class="c1"># // P9_40 | P1_21  | 1</span>
<span class="linenos">87</span><span class="c1"># // P9_37 | P1_23  | 2</span>
<span class="linenos">88</span><span class="c1"># // P9_38 | P1_25  | 3</span>
<span class="linenos">89</span><span class="c1"># // P9_33 | P1_27  | 4</span>
<span class="linenos">90</span><span class="c1"># // P9_36 | P2_35  | 5</span>
<span class="linenos">91</span><span class="c1"># // P9_35 | P1_02  | 6</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/5e3f4472a7855d2c62bc27b0f6491667/analogInContinuous.py"><code class="xref download docutils literal notranslate"><span class="pre">analogInContinuous.py</span></code></a></p>
<p>Be sure to read the instillation instructions in the comments. Also note this uses X
windows and you need to <em>ssh -X 192.168.7.2</em> for X to know where the display is.</p>
<p>Run it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>host$<span class="w"> </span>ssh<span class="w"> </span>-X<span class="w"> </span>bone

bone$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>beaglebone-cookbook-code/06iot
bone$<span class="w"> </span>./analogInContinuous.py
Hit<span class="w"> </span>^C<span class="w"> </span>to<span class="w"> </span>stop
</pre></div>
</div>
<div class="admonition-todo admonition" id="id11">
<p class="admonition-title">Todo</p>
<p>verify this works. fonts are taking too long to load</p>
</div>
<p><a class="reference internal" href="#analog-sine-fig"><span class="std std-ref">1KHz sine wave sampled at 8KHz</span></a> is the output of a 1KHz sine wave.</p>
<p>It’s a good idea to disable the buffer when done.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/bus/iio/devices/iio:device0/buffer/enable
</pre></div>
</div>
</section>
<section id="analog-in-continuous-change-the-sample-rate">
<h4>Analog in - Continuous, Change the sample rate<a class="headerlink" href="#analog-in-continuous-change-the-sample-rate" title="Link to this heading">#</a></h4>
<p>The built in ADCs sample at 8k samples/second by default.
They can run as fast as 200k samples/second by editing a device tree.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/opt/source/bb.org-overlays
bone$<span class="w"> </span>make
</pre></div>
</div>
<p>This will take a while the first time as it compiles all the device trees.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>vi<span class="w"> </span>src/arm/src/arm/BB-ADC-00A0.dts
</pre></div>
</div>
<p>Around line 57 you’ll see</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Line<span class="w">    </span>Code
<span class="m">57</span><span class="w">     </span>//<span class="w"> </span>For<span class="w"> </span>each<span class="w"> </span>step,<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>adc<span class="w"> </span>clock<span class="w"> </span>cycles<span class="w"> </span>to<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>between<span class="w"> </span>setting<span class="w"> </span>up<span class="w"> </span>muxes<span class="w"> </span>and<span class="w"> </span>sampling.
<span class="m">58</span><span class="w">     </span>//<span class="w">  </span>range:<span class="w"> </span><span class="m">0</span><span class="w"> </span>..<span class="w"> </span><span class="m">262143</span>
<span class="m">59</span><span class="w">     </span>//<span class="w">  </span>optional,<span class="w"> </span>default<span class="w"> </span>is<span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="o">(</span>XXX<span class="w"> </span>but<span class="w"> </span>why?!<span class="o">)</span>
<span class="m">60</span><span class="w">     </span>ti,chan-step-opendelay<span class="w"> </span><span class="o">=</span><span class="w"> </span>&lt;<span class="m">152</span><span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="m">152</span>&gt;<span class="p">;</span>
<span class="m">61</span><span class="w">     </span>//<span class="sb">`</span>
<span class="m">62</span><span class="w">     </span>//<span class="w"> </span>XXX<span class="w"> </span>is<span class="w"> </span>there<span class="w"> </span>any<span class="w"> </span>purpose<span class="w"> </span>to<span class="w"> </span><span class="nb">set</span><span class="w"> </span>this<span class="w"> </span>nonzero<span class="w"> </span>other<span class="w"> </span>than<span class="w"> </span>to<span class="w"> </span>fine-tune<span class="w"> </span>the<span class="w"> </span>sample<span class="w"> </span>rate?
<span class="m">63</span>
<span class="m">64</span>
<span class="m">65</span><span class="w">     </span>//<span class="w"> </span>For<span class="w"> </span>each<span class="w"> </span>step,<span class="w"> </span>how<span class="w"> </span>many<span class="w"> </span><span class="nb">times</span><span class="w"> </span>it<span class="w"> </span>should<span class="w"> </span>sample<span class="w"> </span>to<span class="w"> </span>average.
<span class="m">66</span><span class="w">     </span>//<span class="w">  </span>range:<span class="w"> </span><span class="m">1</span><span class="w"> </span>..<span class="w"> </span><span class="m">16</span>,<span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>power<span class="w"> </span>of<span class="w"> </span>two<span class="w"> </span><span class="o">(</span>i.e.<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="m">2</span>,<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="m">8</span>,<span class="w"> </span>or<span class="w"> </span><span class="m">16</span><span class="o">)</span>
<span class="m">67</span><span class="w">     </span>//<span class="w">  </span>optional,<span class="w"> </span>default<span class="w"> </span>is<span class="w"> </span><span class="m">16</span>
<span class="m">68</span><span class="w">     </span>ti,chan-step-avg<span class="w"> </span><span class="o">=</span><span class="w"> </span>&lt;<span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span>&gt;<span class="p">;</span>
</pre></div>
</div>
<p>The comments give lots of details on how to adjust the device tree  to change the sample rate.
Line 68 says for every sample returned, average 16 values. This will give you a cleaner signal, but if you want to go fast, change the 16’s to 1’s. Line 60 says to delay 152 cycles between each sample. Set this to 0 to got as fast a possible.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ti,chan-step-avg<span class="w"> </span><span class="o">=</span><span class="w"> </span>&lt;<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>&gt;<span class="p">;</span>
ti,chan-step-opendelay<span class="w"> </span><span class="o">=</span><span class="w"> </span>&lt;0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00<span class="w"> </span>0x00&gt;<span class="p">;</span>
</pre></div>
</div>
<p>Now compile it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>make
<span class="w">  </span>DTC<span class="w">     </span>src/arm/BB-ADC-00A0.dtbo
gcc<span class="w"> </span>-o<span class="w"> </span>config-pin<span class="w"> </span>./tools/pmunts_muntsos/config-pin.c
</pre></div>
</div>
<p>It knows to only recompile the file you just edited. Now install and reboot.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>sudo<span class="w"> </span>make<span class="w"> </span>install
...
<span class="s1">&#39;src/arm/AM335X-PRU-UIO-00A0.dtbo&#39;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="s1">&#39;/lib/firmware/AM335X-PRU-UIO-00A0.dtbo&#39;</span>
<span class="s1">&#39;src/arm/BB-ADC-00A0.dtbo&#39;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="s1">&#39;/lib/firmware/BB-ADC-00A0.dtbo&#39;</span>
<span class="s1">&#39;src/arm/BB-BBBMINI-00A0.dtbo&#39;</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="s1">&#39;/lib/firmware/BB-BBBMINI-00A0.dtbo&#39;</span>
...
bone$<span class="w"> </span>reboot
</pre></div>
</div>
<p>A number of files get installed, including the ADC file. Now try rerunning.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>beaglebone-cookbook-code/06iot
bone$<span class="w"> </span>./analogInContinuous.py
Hit<span class="w"> </span>^C<span class="w"> </span>to<span class="w"> </span>stop
</pre></div>
</div>
<p>Here’s the output of a 10KHz triangle wave.</p>
<div class="admonition-todo admonition" id="id12">
<p class="admonition-title">Todo</p>
<p>Is this true: (The plot is wrong, but eLinux won’t let me fix it.)</p>
</div>
<figure class="align-center" id="id41">
<span id="analog-tri-fig"></span><img alt="10KHz triangle wave sampled at 200KHz" src="../../../_images/Tri10k.png" />
<figcaption>
<p><span class="caption-number">Fig. 690 </span><span class="caption-text">10KHz triangle wave sampled at 200KHz</span><a class="headerlink" href="#id41" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>It’s still a good idea to disable the buffer when done.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/bus/iio/devices/iio:device0/buffer/enable
</pre></div>
</div>
</section>
</section>
</section>
<section id="sending-an-email">
<h2>Sending an Email<a class="headerlink" href="#sending-an-email" title="Link to this heading">#</a></h2>
<section id="id13">
<h3>Problem<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<p>You want to send an email via Gmail from the Bone.</p>
</section>
<section id="id14">
<h3>Solution<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<p>This example came from <a class="reference external" href="https://realpython.com/python-send-email/">https://realpython.com/python-send-email/</a>.
First, you need to <a class="reference external" href="https://mail.google.com">set up a Gmail account</a>, if you don’t already have one.
Then add the code in <a class="reference internal" href="#networking-nodemailer-code"><span class="std std-ref">Sending email using nodemailer (emailtTest.py)</span></a> to a file named <code class="docutils literal notranslate"><span class="pre">emailTest.py</span></code>. Substitute your own Gmail username.  For the password:</p>
<ul class="simple">
<li><p>Go to: <a class="reference external" href="https://myaccount.google.com/security">https://myaccount.google.com/security</a></p></li>
<li><p>Go to <em>2-Step Verification</em> and at the bottom, select App password.</p></li>
<li><p>Generate your own 16 char password and copy it into <code class="docutils literal notranslate"><span class="pre">emailTest.py</span></code>.</p></li>
<li><p>Be sure to delete password when done <a class="reference external" href="https://myaccount.google.com/apppasswords">https://myaccount.google.com/apppasswords</a> .</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id42">
<span id="networking-nodemailer-code"></span><div class="code-block-caption"><span class="caption-number">Listing 65 </span><span class="caption-text">Sending email using nodemailer (emailtTest.py)</span><a class="headerlink" href="#id42" title="Link to this code">#</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># From: https://realpython.com/python-send-email/</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">smtplib</span><span class="o">,</span> <span class="nn">ssl</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">port</span> <span class="o">=</span> <span class="mi">587</span>  <span class="c1"># For starttls</span>
<span class="linenos"> 6</span><span class="n">smtp_server</span>  <span class="o">=</span> <span class="s2">&quot;smtp.gmail.com&quot;</span>
<span class="linenos"> 7</span><span class="n">sender_email</span> <span class="o">=</span> <span class="s2">&quot;from_account@gmail.com&quot;</span>
<span class="linenos"> 8</span><span class="n">receiver_email</span> <span class="o">=</span> <span class="s2">&quot;to_account@gmail.com&quot;</span>
<span class="linenos"> 9</span><span class="c1"># Go to: https://myaccount.google.com/security</span>
<span class="linenos">10</span><span class="c1"># Select App password</span>
<span class="linenos">11</span><span class="c1"># Generate your own 16 char password, copy here</span>
<span class="linenos">12</span><span class="c1"># Delete password when done</span>
<span class="linenos">13</span><span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;cftqhcejjdjfdwjh&quot;</span>
<span class="linenos">14</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="linenos">15</span><span class="s2">Subject: Testing email</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="s2">This message is sent from Python.</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">20</span><span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">()</span>
<span class="linenos">21</span><span class="k">with</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="n">smtp_server</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span> <span class="k">as</span> <span class="n">server</span><span class="p">:</span>
<span class="linenos">22</span>    <span class="n">server</span><span class="o">.</span><span class="n">starttls</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
<span class="linenos">23</span>    <span class="n">server</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">sender_email</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="n">server</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">sender_email</span><span class="p">,</span> <span class="n">receiver_email</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/fc39acc8fea825c28df872cd17a743d6/emailTest.py"><code class="xref download docutils literal notranslate"><span class="pre">emailTest.py</span></code></a></p>
<p>Then run the script to send the email:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>chmod<span class="w"> </span>*x<span class="w"> </span>emailTest.py
bone$<span class="w"> </span>.<span class="se">\e</span>mailTest.py
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This solution requires your Gmail password to be in plain text in a file, which is a security problem.
Make sure you know who has access to your Bone. Also, if you remove the microSD card, make sure you know
who has access to it. Anyone with your microSD card can read your Gmail password.</p>
</div>
<p>Be careful about putting this into a loop.  Gmail presently limits you to
<a class="reference external" href="http://group-mail.com/email-marketing/how-to-send-bulk-emails-using-gmail">500 emails per day and 10 MB per message</a>.</p>
<p>See <a class="reference external" href="https://realpython.com/python-send-email/">https://realpython.com/python-send-email/</a> for an example that sends an attached file.</p>
</section>
</section>
<section id="sending-an-sms-message">
<h2>Sending an SMS Message<a class="headerlink" href="#sending-an-sms-message" title="Link to this heading">#</a></h2>
<div class="admonition-todo admonition" id="id15">
<p class="admonition-title">Todo</p>
<p>My twilio account is suspended, using <a class="reference external" href="mailto:yoder&#37;&#52;&#48;rose-hulman&#46;edu">yoder<span>&#64;</span>rose-hulman<span>&#46;</span>edu</a>.</p>
</div>
<section id="id16">
<h3>Problem<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<p>You want to send a text message from BeagleBone Black.</p>
</section>
<section id="id17">
<h3>Solution<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<p>There are a number of SMS services out there. This recipe uses Twilio because you can use it for free,
but you will need to <a class="reference external" href="http://bit.ly/1MrHBBF">verify the number</a> to which you are texting. First, go
to <a class="reference external" href="https://www.twilio.com/">Twilio’s home page</a> and set up an account. Note your account SID and
authorization token. If you are using the free version, be sure to <a class="reference external" href="http://bit.ly/19c7GZ7">verify your numbers</a>.</p>
<p>Next, install Trilio by using the following command for python:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>python-pip
bone$<span class="w"> </span>sudo<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>twilio
</pre></div>
</div>
<p>or for Javascript:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>-g<span class="w"> </span>twilio
</pre></div>
</div>
<p>Finally, add the code in <a class="reference internal" href="#networking-twilio-code"><span class="std std-ref">Sending SMS messages using Twilio (twilioTest.py)</span></a> to a file named <code class="docutils literal notranslate"><span class="pre">twilioTest.py</span></code> and run it. Your text will be sent.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Python</label><div class="sd-tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id43">
<span id="networking-twilio-code"></span><div class="code-block-caption"><span class="caption-number">Listing 66 </span><span class="caption-text">Sending SMS messages using Twilio (<code class="docutils literal notranslate"><span class="pre">twilioTest.py</span></code>)</span><a class="headerlink" href="#id43" title="Link to this code">#</a></div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="c1"># Download the helper library from https://www.twilio.com/docs/python/install</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">os</span>
<span class="linenos"> 4</span><span class="kn">from</span> <span class="nn">twilio.rest</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># Find your Account SID and Auth Token at twilio.com/console</span>
<span class="linenos"> 8</span><span class="c1"># and set the environment variables. See http://twil.io/secure</span>
<span class="linenos"> 9</span><span class="n">account_sid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;TWILIO_ACCOUNT_SID&#39;</span><span class="p">]</span>
<span class="linenos">10</span><span class="n">auth_token</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;TWILIO_AUTH_TOKEN&#39;</span><span class="p">]</span>
<span class="linenos">11</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">account_sid</span><span class="p">,</span> <span class="n">auth_token</span><span class="p">)</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">messages</span> \
<span class="linenos">14</span>                <span class="o">.</span><span class="n">create</span><span class="p">(</span>
<span class="linenos">15</span>                     <span class="n">body</span><span class="o">=</span><span class="s2">&quot;Join Earth&#39;s mightiest heroes. Like Kevin Bacon.&quot;</span><span class="p">,</span>
<span class="linenos">16</span>                     <span class="n">from_</span><span class="o">=</span><span class="s1">&#39;+18122333219&#39;</span><span class="p">,</span>
<span class="linenos">17</span>                     <span class="n">to</span><span class="o">=</span><span class="s1">&#39;+18122333219&#39;</span>
<span class="linenos">18</span>                 <span class="p">)</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">sid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/6cf9827e74068c5ed7bd4276ab458ac2/twilioTest.py"><code class="xref download docutils literal notranslate"><span class="pre">twilioTest.py</span></code></a></p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
JavaScript</label><div class="sd-tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id44">
<div class="code-block-caption"><span class="caption-number">Listing 67 </span><span class="caption-text">Sending SMS messages using Twilio (<code class="docutils literal notranslate"><span class="pre">twilio-test.js</span></code>)</span><a class="headerlink" href="#id44" title="Link to this code">#</a></div>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env node</span>
<span class="linenos"> 2</span><span class="c1">// From: http://twilio.github.io/twilio-node/</span>
<span class="linenos"> 3</span><span class="c1">// Twilio Credentials </span>
<span class="linenos"> 4</span><span class="kd">var</span><span class="w"> </span><span class="nx">accountSid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span><span class="w"> </span>
<span class="linenos"> 5</span><span class="kd">var</span><span class="w"> </span><span class="nx">authToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span><span class="w"> </span>
<span class="linenos"> 6</span><span class="w"> </span>
<span class="linenos"> 7</span><span class="c1">//require the Twilio module and create a REST client </span>
<span class="linenos"> 8</span><span class="kd">var</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;twilio&#39;</span><span class="p">)(</span><span class="nx">accountSid</span><span class="p">,</span><span class="w"> </span><span class="nx">authToken</span><span class="p">);</span><span class="w"> </span>
<span class="linenos"> 9</span><span class="w"> </span>
<span class="linenos">10</span><span class="nx">client</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span>
<span class="linenos">11</span><span class="w">	</span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;812555121&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="linenos">12</span><span class="w">	</span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;+2605551212&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="linenos">13</span><span class="w">	</span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;This is a test&quot;</span><span class="p">,</span><span class="w">   </span>
<span class="linenos">14</span><span class="p">},</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="linenos">15</span><span class="w">	</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">sid</span><span class="p">);</span><span class="w"> </span>
<span class="linenos">16</span><span class="p">});</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="c1">// https://github.com/twilio/twilio-node/blob/master/LICENSE</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/44cba27872f0de7a923d5dd3a3712823/twilio-test.js"><code class="xref download docutils literal notranslate"><span class="pre">twilio-test.js</span></code></a></p>
</div>
</div>
<p>Twilio allows a small number of free text messages, enough to test your code and to play around some.</p>
</section>
</section>
<section id="displaying-the-current-weather-conditions">
<h2>Displaying the Current Weather Conditions<a class="headerlink" href="#displaying-the-current-weather-conditions" title="Link to this heading">#</a></h2>
<section id="id18">
<h3>Problem<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<p>You want to display the current weather conditions.</p>
</section>
<section id="id19">
<h3>Solution<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<p>Because your Bone is on the network, it’s not hard to access the current weather conditions from a weather API.</p>
<ul class="simple">
<li><p>Go to <a class="reference external" href="https://openweathermap.org/">https://openweathermap.org/</a> and create an account.</p></li>
<li><p>Go to <a class="reference external" href="https://home.openweathermap.org/api_keys">https://home.openweathermap.org/api_keys</a> and get your API key.</p></li>
<li><p>Store your key in the <em>bash</em> variable <em>APPID</em>.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">APPID</span><span class="o">=</span><span class="s2">&quot;Your key&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Then add the code in <a class="reference internal" href="#networking-weather-code"><span class="std std-ref">Code for getting current weather conditions (weather.py)</span></a> to a file named <code class="docutils literal notranslate"><span class="pre">weather.py</span></code>.</p></li>
<li><p>Run the python script.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id45">
<span id="networking-weather-code"></span><div class="code-block-caption"><span class="caption-number">Listing 68 </span><span class="caption-text">Code for getting current weather conditions (<code class="docutils literal notranslate"><span class="pre">weather.py</span></code>)</span><a class="headerlink" href="#id45" title="Link to this code">#</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span><span class="c1"># Displays current weather and forecast</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">os</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos"> 5</span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="linenos"> 6</span><span class="kn">import</span> <span class="nn">requests</span>     <span class="c1"># For getting weather</span>
<span class="linenos"> 7</span>                
<span class="linenos"> 8</span><span class="c1"># http://api.openweathermap.org/data/2.5/onecall</span>
<span class="linenos"> 9</span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">10</span>    <span class="s1">&#39;appid&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;APPID&#39;</span><span class="p">],</span>
<span class="linenos">11</span>    <span class="c1"># &#39;city&#39;: &#39;brazil,indiana&#39;,</span>
<span class="linenos">12</span>    <span class="s1">&#39;exclude&#39;</span><span class="p">:</span> <span class="s2">&quot;minutely,hourly&quot;</span><span class="p">,</span>
<span class="linenos">13</span>    <span class="s1">&#39;lat&#39;</span><span class="p">:</span>  <span class="s1">&#39;39.52&#39;</span><span class="p">,</span>
<span class="linenos">14</span>    <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="s1">&#39;-87.12&#39;</span><span class="p">,</span>
<span class="linenos">15</span>    <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;imperial&#39;</span>
<span class="linenos">16</span>    <span class="p">}</span>
<span class="linenos">17</span><span class="n">urlWeather</span> <span class="o">=</span> <span class="s2">&quot;http://api.openweathermap.org/data/2.5/onecall&quot;</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Getting weather&quot;</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="k">try</span><span class="p">:</span>
<span class="linenos">22</span>    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">urlWeather</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="linenos">23</span>    <span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="o">==</span><span class="mi">200</span><span class="p">):</span>
<span class="linenos">24</span>        <span class="c1"># print(&quot;headers: &quot;, r.headers)</span>
<span class="linenos">25</span>        <span class="c1"># print(&quot;text: &quot;, r.text)</span>
<span class="linenos">26</span>        <span class="c1"># print(&quot;json: &quot;, r.json())</span>
<span class="linenos">27</span>        <span class="n">weather</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos">28</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Temp: &quot;</span><span class="p">,</span> <span class="n">weather</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;temp&#39;</span><span class="p">])</span>         <span class="c1"># ①</span>
<span class="linenos">29</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Humid:&quot;</span><span class="p">,</span> <span class="n">weather</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;humidity&#39;</span><span class="p">])</span>
<span class="linenos">30</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Low:  &quot;</span><span class="p">,</span> <span class="n">weather</span><span class="p">[</span><span class="s1">&#39;daily&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;temp&#39;</span><span class="p">][</span><span class="s1">&#39;min&#39;</span><span class="p">])</span>
<span class="linenos">31</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;High: &quot;</span><span class="p">,</span> <span class="n">weather</span><span class="p">[</span><span class="s1">&#39;daily&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;temp&#39;</span><span class="p">][</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="linenos">32</span>        <span class="n">day</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="s1">&#39;daily&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;sunrise&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">weather</span><span class="p">[</span><span class="s1">&#39;timezone_offset&#39;</span><span class="p">]</span>
<span class="linenos">33</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;sunrise: &quot;</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">day</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">))</span>
<span class="linenos">34</span>        <span class="c1"># print(&quot;Day: &quot; + datetime.utcfromtimestamp(day).strftime(&#39;%a&#39;))</span>
<span class="linenos">35</span>        <span class="c1"># print(&quot;weather: &quot;, weather[&#39;daily&#39;][1])           # ②</span>
<span class="linenos">36</span>        <span class="c1"># print(&quot;weather: &quot;, weather)                       # ③</span>
<span class="linenos">37</span>        <span class="c1"># print(&quot;icon: &quot;, weather[&#39;current&#39;][&#39;weather&#39;][0][&#39;icon&#39;])</span>
<span class="linenos">38</span>        <span class="c1"># print()</span>
<span class="linenos">39</span>
<span class="linenos">40</span>    <span class="k">else</span><span class="p">:</span>
<span class="linenos">41</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;status_code: &quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="linenos">42</span><span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
<span class="linenos">43</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File not found: &quot;</span> <span class="o">+</span> <span class="n">tmp101</span><span class="p">)</span>
<span class="linenos">44</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Have you run setup.sh?&quot;</span><span class="p">)</span>
<span class="linenos">45</span><span class="k">except</span><span class="p">:</span>
<span class="linenos">46</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unexpected error:&quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/4105f8785e8149ae3826aaf2e9807220/weather.py"><code class="xref download docutils literal notranslate"><span class="pre">weather.py</span></code></a></p>
<ol class="arabic simple">
<li><p>Prints current conditions.</p></li>
<li><p>Prints the forecast for the next day.</p></li>
<li><p>Prints everything returned by the weather site.</p></li>
</ol>
<p>Uncomment what you want to be displayed.</p>
<p>Run this by using the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>./weather.py
Getting<span class="w"> </span>weather
Temp:<span class="w">  </span><span class="m">73</span>.72
Humid:<span class="w"> </span><span class="m">31</span>
Low:<span class="w">   </span><span class="m">54</span>.21
High:<span class="w">  </span><span class="m">75</span>.47
sunrise:<span class="w"> </span><span class="m">2023</span>-06-09<span class="w"> </span><span class="m">14</span>:21:07
</pre></div>
</div>
<p>The weather API returns lots of information. Use Python to extract the information you want.</p>
</section>
</section>
<section id="sending-and-receiving-tweets">
<h2>Sending and Receiving Tweets<a class="headerlink" href="#sending-and-receiving-tweets" title="Link to this heading">#</a></h2>
<section id="id20">
<h3>Problem<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<p>You want to send and receive tweets (Twitter posts) with your Bone.</p>
</section>
<section id="id21">
<h3>Solution<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://twitter.com">Twitter</a> has a whole <a class="reference external" href="https://github.com/twitterdev/Twitter-API-v2-sample-code">git repo</a>
of sample code for interacting with Twitter.  Here I’ll show how to create a tweet and then how to delete it.</p>
</section>
</section>
<section id="creating-a-project-and-app">
<h2>Creating a Project and App<a class="headerlink" href="#creating-a-project-and-app" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Follow the <a class="reference external" href="https://developer.twitter.com/en/docs/apps/overview">directions here</a> to create a project and app.</p></li>
<li><p>Be sure to give your app Read and Write permission.</p></li>
<li><p>Then go to the <a class="reference external" href="https://developer.twitter.com/en/portal/projects-and-apps">developer portal</a> and select you app by clicking on the gear icon to the right of the app name.</p></li>
<li><p>Click on the <em>Keys and tokens</em> tab. Here you can get to all your keys and tokens.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Be sure to record them, you can’t get them later.</p>
</div>
<ul class="simple">
<li><p>Open the file <em>twitterKeys.sh</em> and record your keys in it.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">API_KEY</span><span class="o">=</span><span class="s1">&#39;XXX&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">API_SECRET_KEY</span><span class="o">=</span><span class="s1">&#39;XXX&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">BEARER_TOKEN</span><span class="o">=</span><span class="s1">&#39;XXX&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">TOKEN</span><span class="o">=</span><span class="s1">&#39;XXXX&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">TOKEN_SECRET</span><span class="o">=</span><span class="s1">&#39;XXX&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Next, source the file so the values will appear in your bash session.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>twitterKeys.sh
</pre></div>
</div>
<p>You’ll need to do this every time you open a new <em>bash</em> window.</p>
</section>
<section id="creating-a-tweet">
<h2>Creating a tweet<a class="headerlink" href="#creating-a-tweet" title="Link to this heading">#</a></h2>
<p>Add the code in <a class="reference internal" href="#twitter-create-code"><span class="std std-ref">Create a Tweet (twitter_create_tweet.py)</span></a> to a file called
<code class="docutils literal notranslate"><span class="pre">twitter_create_tweet_.py</span></code> and run it to see your timeline.</p>
<div class="literal-block-wrapper docutils container" id="id46">
<span id="twitter-create-code"></span><div class="code-block-caption"><span class="caption-number">Listing 69 </span><span class="caption-text">Create a Tweet (<code class="docutils literal notranslate"><span class="pre">twitter_create_tweet.py</span></code>)</span><a class="headerlink" href="#id46" title="Link to this code">#</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="cp"># From: https:</span><span class="c1">//github.com/twitterdev/Twitter-API-v2-sample-code/blob/main/Manage-Tweets/create_tweet.py</span>
<span class="linenos"> 3</span><span class="n">from</span><span class="w"> </span><span class="n">requests_oauthlib</span><span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="n">OAuth1Session</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="n">os</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="n">json</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="cp"># In your terminal please set your environment variables by running the following lines of code.</span>
<span class="linenos"> 8</span><span class="cp"># export &#39;API_KEY&#39;=&#39;&lt;your_consumer_key&gt;&#39;</span>
<span class="linenos"> 9</span><span class="cp"># export &#39;API_SECRET_KEY&#39;=&#39;&lt;your_consumer_secret&gt;&#39;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="n">consumer_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;API_KEY&quot;</span><span class="p">)</span>
<span class="linenos">12</span><span class="n">consumer_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;API_SECRET_KEY&quot;</span><span class="p">)</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="cp"># Be sure to add replace the text of the with the text you wish to Tweet. You can also add parameters to post polls, quote Tweets, Tweet with reply settings, and Tweet to Super Followers in addition to other features.</span>
<span class="linenos">15</span><span class="n">payload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;text&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;Hello world!&quot;</span><span class="p">}</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="cp"># Get request token</span>
<span class="linenos">18</span><span class="n">request_token_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.twitter.com/oauth/request_token?oauth_callback=oob&amp;x_auth_access_type=write&quot;</span>
<span class="linenos">19</span><span class="n">oauth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OAuth1Session</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span><span class="w"> </span><span class="n">client_secret</span><span class="o">=</span><span class="n">consumer_secret</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="nl">try</span><span class="p">:</span>
<span class="linenos">22</span><span class="w">    </span><span class="n">fetch_response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="n">fetch_request_token</span><span class="p">(</span><span class="n">request_token_url</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">except</span><span class="w"> </span><span class="n">ValueError</span><span class="o">:</span>
<span class="linenos">24</span><span class="w">    </span><span class="n">print</span><span class="p">(</span>
<span class="linenos">25</span><span class="w">        </span><span class="s">&quot;There may have been an issue with the consumer_key or consumer_secret you entered.&quot;</span>
<span class="linenos">26</span><span class="w">    </span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="n">resource_owner_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fetch_response</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;oauth_token&quot;</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">resource_owner_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fetch_response</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;oauth_token_secret&quot;</span><span class="p">)</span>
<span class="linenos">30</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Got OAuth token: %s&quot;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">resource_owner_key</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="cp"># Get authorization</span>
<span class="linenos">33</span><span class="n">base_authorization_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.twitter.com/oauth/authorize&quot;</span>
<span class="linenos">34</span><span class="n">authorization_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="n">authorization_url</span><span class="p">(</span><span class="n">base_authorization_url</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Please go here and authorize: %s&quot;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">authorization_url</span><span class="p">)</span>
<span class="linenos">36</span><span class="n">verifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">(</span><span class="s">&quot;Paste the PIN here: &quot;</span><span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="cp"># Get the access token</span>
<span class="linenos">39</span><span class="n">access_token_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.twitter.com/oauth/access_token&quot;</span>
<span class="linenos">40</span><span class="n">oauth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OAuth1Session</span><span class="p">(</span>
<span class="linenos">41</span><span class="w">    </span><span class="n">consumer_key</span><span class="p">,</span>
<span class="linenos">42</span><span class="w">    </span><span class="n">client_secret</span><span class="o">=</span><span class="n">consumer_secret</span><span class="p">,</span>
<span class="linenos">43</span><span class="w">    </span><span class="n">resource_owner_key</span><span class="o">=</span><span class="n">resource_owner_key</span><span class="p">,</span>
<span class="linenos">44</span><span class="w">    </span><span class="n">resource_owner_secret</span><span class="o">=</span><span class="n">resource_owner_secret</span><span class="p">,</span>
<span class="linenos">45</span><span class="w">    </span><span class="n">verifier</span><span class="o">=</span><span class="n">verifier</span><span class="p">,</span>
<span class="linenos">46</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">oauth_tokens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="n">fetch_access_token</span><span class="p">(</span><span class="n">access_token_url</span><span class="p">)</span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="n">access_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth_tokens</span><span class="p">[</span><span class="s">&quot;oauth_token&quot;</span><span class="p">]</span>
<span class="linenos">50</span><span class="n">access_token_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth_tokens</span><span class="p">[</span><span class="s">&quot;oauth_token_secret&quot;</span><span class="p">]</span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="cp"># Make the request</span>
<span class="linenos">53</span><span class="n">oauth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OAuth1Session</span><span class="p">(</span>
<span class="linenos">54</span><span class="w">    </span><span class="n">consumer_key</span><span class="p">,</span>
<span class="linenos">55</span><span class="w">    </span><span class="n">client_secret</span><span class="o">=</span><span class="n">consumer_secret</span><span class="p">,</span>
<span class="linenos">56</span><span class="w">    </span><span class="n">resource_owner_key</span><span class="o">=</span><span class="n">access_token</span><span class="p">,</span>
<span class="linenos">57</span><span class="w">    </span><span class="n">resource_owner_secret</span><span class="o">=</span><span class="n">access_token_secret</span><span class="p">,</span>
<span class="linenos">58</span><span class="p">)</span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="cp"># Making the request</span>
<span class="linenos">61</span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="n">post</span><span class="p">(</span>
<span class="linenos">62</span><span class="w">    </span><span class="s">&quot;https://api.twitter.com/2/tweets&quot;</span><span class="p">,</span>
<span class="linenos">63</span><span class="w">    </span><span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
<span class="linenos">64</span><span class="p">)</span>
<span class="linenos">65</span>
<span class="linenos">66</span><span class="k">if</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">201</span><span class="o">:</span>
<span class="linenos">67</span><span class="w">    </span><span class="n">raise</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span>
<span class="linenos">68</span><span class="w">        </span><span class="s">&quot;Request returned an error: {} {}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="linenos">69</span><span class="w">    </span><span class="p">)</span>
<span class="linenos">70</span>
<span class="linenos">71</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Response code: {}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">))</span>
<span class="linenos">72</span>
<span class="linenos">73</span><span class="cp"># Saving the response as JSON</span>
<span class="linenos">74</span><span class="n">json_response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos">75</span><span class="n">print</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_response</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">sort_keys</span><span class="o">=</span><span class="n">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/5d27b191118e4fc1c9f8266509a32a9e/twitter_create_tweet.py"><code class="xref download docutils literal notranslate"><span class="pre">twitter_create_tweet.py</span></code></a></p>
<p>Run the code and you’ll have to authorize.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>./twitter_create_tweet.py
Got<span class="w"> </span>OAuth<span class="w"> </span>token:<span class="w"> </span>tWBldQAAAAAAWBJgAAABggJt7qg
Please<span class="w"> </span>go<span class="w"> </span>here<span class="w"> </span>and<span class="w"> </span>authorize:<span class="w"> </span>https://api.twitter.com/oauth/authorize?oauth_token<span class="o">=</span>tWBldQAAAAAAWBJgAAABggJt7qg
Paste<span class="w"> </span>the<span class="w"> </span>PIN<span class="w"> </span>here:<span class="w"> </span><span class="m">4859044</span>
Response<span class="w"> </span>code:<span class="w"> </span><span class="m">201</span>
<span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;data&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;1547963178700533760&quot;</span>,
<span class="w">        </span><span class="s2">&quot;text&quot;</span>:<span class="w"> </span><span class="s2">&quot;Hello world!&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Check your twitter account and you’ll see the new tweet.
Record the <em>id</em> number and we’ll use it next to delete the tweet.</p>
</section>
<section id="deleting-a-tweet">
<h2>Deleting a tweet<a class="headerlink" href="#deleting-a-tweet" title="Link to this heading">#</a></h2>
<p>Use the code in <a class="reference internal" href="#twitter-delete-code"><span class="std std-ref">Code to delete a tweet  (twitter_delete_tweet.py)</span></a> to delete a tweet.
Around line 15 is the <em>id</em> number.  Paste in the value returned above.</p>
<div class="literal-block-wrapper docutils container" id="id47">
<span id="twitter-delete-code"></span><div class="code-block-caption"><span class="caption-number">Listing 70 </span><span class="caption-text">Code to delete a tweet  (<code class="docutils literal notranslate"><span class="pre">twitter_delete_tweet.py</span></code>)</span><a class="headerlink" href="#id47" title="Link to this code">#</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="cp"># From: https:</span><span class="c1">//github.com/twitterdev/Twitter-API-v2-sample-code/blob/main/Manage-Tweets/delete_tweet.py</span>
<span class="linenos"> 3</span><span class="n">from</span><span class="w"> </span><span class="n">requests_oauthlib</span><span class="w"> </span><span class="k">import</span><span class="w"> </span><span class="n">OAuth1Session</span>
<span class="linenos"> 4</span><span class="k">import</span><span class="w"> </span><span class="n">os</span>
<span class="linenos"> 5</span><span class="k">import</span><span class="w"> </span><span class="n">json</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="cp"># In your terminal please set your environment variables by running the following lines of code.</span>
<span class="linenos"> 8</span><span class="cp"># export &#39;API_KEY&#39;=&#39;&lt;your_consumer_key&gt;&#39;</span>
<span class="linenos"> 9</span><span class="cp"># export &#39;API_SECRET_KEY&#39;=&#39;&lt;your_consumer_secret&gt;&#39;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="n">consumer_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;API_KEY&quot;</span><span class="p">)</span>
<span class="linenos">12</span><span class="n">consumer_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;API_SECRET_KEY&quot;</span><span class="p">)</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="cp"># Be sure to replace tweet-id-to-delete with the id of the Tweet you wish to delete. The authenticated user must own the list in order to delete</span>
<span class="linenos">15</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1547963178700533760&quot;</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="cp"># Get request token</span>
<span class="linenos">18</span><span class="n">request_token_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.twitter.com/oauth/request_token?oauth_callback=oob&amp;x_auth_access_type=write&quot;</span>
<span class="linenos">19</span><span class="n">oauth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OAuth1Session</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span><span class="w"> </span><span class="n">client_secret</span><span class="o">=</span><span class="n">consumer_secret</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="nl">try</span><span class="p">:</span>
<span class="linenos">22</span><span class="w">    </span><span class="n">fetch_response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="n">fetch_request_token</span><span class="p">(</span><span class="n">request_token_url</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">except</span><span class="w"> </span><span class="n">ValueError</span><span class="o">:</span>
<span class="linenos">24</span><span class="w">    </span><span class="n">print</span><span class="p">(</span>
<span class="linenos">25</span><span class="w">        </span><span class="s">&quot;There may have been an issue with the consumer_key or consumer_secret you entered.&quot;</span>
<span class="linenos">26</span><span class="w">    </span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="n">resource_owner_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fetch_response</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;oauth_token&quot;</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">resource_owner_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fetch_response</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;oauth_token_secret&quot;</span><span class="p">)</span>
<span class="linenos">30</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Got OAuth token: %s&quot;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">resource_owner_key</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="cp"># Get authorization</span>
<span class="linenos">33</span><span class="n">base_authorization_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.twitter.com/oauth/authorize&quot;</span>
<span class="linenos">34</span><span class="n">authorization_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="n">authorization_url</span><span class="p">(</span><span class="n">base_authorization_url</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Please go here and authorize: %s&quot;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">authorization_url</span><span class="p">)</span>
<span class="linenos">36</span><span class="n">verifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">(</span><span class="s">&quot;Paste the PIN here: &quot;</span><span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="cp"># Get the access token</span>
<span class="linenos">39</span><span class="n">access_token_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.twitter.com/oauth/access_token&quot;</span>
<span class="linenos">40</span><span class="n">oauth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OAuth1Session</span><span class="p">(</span>
<span class="linenos">41</span><span class="w">    </span><span class="n">consumer_key</span><span class="p">,</span>
<span class="linenos">42</span><span class="w">    </span><span class="n">client_secret</span><span class="o">=</span><span class="n">consumer_secret</span><span class="p">,</span>
<span class="linenos">43</span><span class="w">    </span><span class="n">resource_owner_key</span><span class="o">=</span><span class="n">resource_owner_key</span><span class="p">,</span>
<span class="linenos">44</span><span class="w">    </span><span class="n">resource_owner_secret</span><span class="o">=</span><span class="n">resource_owner_secret</span><span class="p">,</span>
<span class="linenos">45</span><span class="w">    </span><span class="n">verifier</span><span class="o">=</span><span class="n">verifier</span><span class="p">,</span>
<span class="linenos">46</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">oauth_tokens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="n">fetch_access_token</span><span class="p">(</span><span class="n">access_token_url</span><span class="p">)</span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="n">access_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth_tokens</span><span class="p">[</span><span class="s">&quot;oauth_token&quot;</span><span class="p">]</span>
<span class="linenos">50</span><span class="n">access_token_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth_tokens</span><span class="p">[</span><span class="s">&quot;oauth_token_secret&quot;</span><span class="p">]</span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="cp"># Make the request</span>
<span class="linenos">53</span><span class="n">oauth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OAuth1Session</span><span class="p">(</span>
<span class="linenos">54</span><span class="w">    </span><span class="n">consumer_key</span><span class="p">,</span>
<span class="linenos">55</span><span class="w">    </span><span class="n">client_secret</span><span class="o">=</span><span class="n">consumer_secret</span><span class="p">,</span>
<span class="linenos">56</span><span class="w">    </span><span class="n">resource_owner_key</span><span class="o">=</span><span class="n">access_token</span><span class="p">,</span>
<span class="linenos">57</span><span class="w">    </span><span class="n">resource_owner_secret</span><span class="o">=</span><span class="n">access_token_secret</span><span class="p">,</span>
<span class="linenos">58</span><span class="p">)</span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="cp"># Making the request</span>
<span class="linenos">61</span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oauth</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s">&quot;https://api.twitter.com/2/tweets/{}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">id</span><span class="p">))</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="k">if</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">200</span><span class="o">:</span>
<span class="linenos">64</span><span class="w">    </span><span class="n">raise</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span>
<span class="linenos">65</span><span class="w">        </span><span class="s">&quot;Request returned an error: {} {}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="linenos">66</span><span class="w">    </span><span class="p">)</span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Response code: {}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">))</span>
<span class="linenos">69</span>
<span class="linenos">70</span><span class="cp"># Saving the response as JSON</span>
<span class="linenos">71</span><span class="n">json_response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
<span class="linenos">72</span><span class="n">print</span><span class="p">(</span><span class="n">json_response</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/a143a3d4c0ca8a81efb8a2ec8b216fc6/twitter_delete_tweet.py"><code class="xref download docutils literal notranslate"><span class="pre">twitter_delete_tweet.py</span></code></a></p>
<div class="admonition-todo admonition" id="id22">
<p class="admonition-title">Todo</p>
<p>Start Here.  Update for python.</p>
</div>
<p>The code in <a class="reference internal" href="#networking-pushbutton-code"><span class="std std-ref">Tweet when a button is pushed (twitterPushbutton.js)</span></a> sends a tweet whenever a button is pushed.</p>
<div class="literal-block-wrapper docutils container" id="id48">
<span id="networking-pushbutton-code"></span><div class="code-block-caption"><span class="caption-number">Listing 71 </span><span class="caption-text">Tweet when a button is pushed (twitterPushbutton.js)</span><a class="headerlink" href="#id48" title="Link to this code">#</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env node</span>
<span class="linenos"> 2</span><span class="c1">// From: https://www.npmjs.org/package/node-twitter</span>
<span class="linenos"> 3</span><span class="c1">// Tweets with attached image media (JPG, PNG or GIF) can be posted </span>
<span class="linenos"> 4</span><span class="c1">// using the upload API endpoint.</span>
<span class="linenos"> 5</span><span class="kd">var</span><span class="w"> </span><span class="nx">Twitter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;node-twitter&#39;</span><span class="p">);</span>
<span class="linenos"> 6</span><span class="kd">var</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;bonescript&#39;</span><span class="p">);</span>
<span class="linenos"> 7</span><span class="kd">var</span><span class="w"> </span><span class="nx">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./twitterKeys&#39;</span><span class="p">);</span>
<span class="linenos"> 8</span><span class="kd">var</span><span class="w"> </span><span class="nx">gpio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;P9_42&quot;</span><span class="p">;</span>
<span class="linenos"> 9</span><span class="kd">var</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="nx">b</span><span class="p">.</span><span class="nx">pinMode</span><span class="p">(</span><span class="nx">gpio</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">INPUT</span><span class="p">);</span>
<span class="linenos">12</span><span class="nx">b</span><span class="p">.</span><span class="nx">attachInterrupt</span><span class="p">(</span><span class="nx">gpio</span><span class="p">,</span><span class="w"> </span><span class="nx">sendTweet</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">FALLING</span><span class="p">);</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kd">var</span><span class="w"> </span><span class="nx">twitterRestClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Twitter</span><span class="p">.</span><span class="nx">RestClient</span><span class="p">(</span>
<span class="linenos">15</span><span class="w">    </span><span class="nx">key</span><span class="p">.</span><span class="nx">API_KEY</span><span class="p">,</span><span class="w"> </span><span class="nx">key</span><span class="p">.</span><span class="nx">API_SECRET</span><span class="p">,</span>
<span class="linenos">16</span><span class="w">    </span><span class="nx">key</span><span class="p">.</span><span class="nx">TOKEN</span><span class="p">,</span><span class="w">   </span><span class="nx">key</span><span class="p">.</span><span class="nx">TOKEN_SECRET</span>
<span class="linenos">17</span><span class="p">);</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="kd">function</span><span class="w"> </span><span class="nx">sendTweet</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Sending...&quot;</span><span class="p">);</span>
<span class="linenos">21</span><span class="w">    </span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="w">    </span><span class="nx">twitterRestClient</span><span class="p">.</span><span class="nx">statusesUpdate</span><span class="p">(</span>
<span class="linenos">24</span><span class="w">        </span><span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Posting tweet &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; via my BeagleBone Black&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">},</span>
<span class="linenos">25</span><span class="w">        </span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">26</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">27</span><span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>
<span class="linenos">28</span><span class="w">                    </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">));</span>
<span class="linenos">29</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">30</span><span class="w">    </span>
<span class="linenos">31</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">32</span><span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="linenos">33</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">34</span><span class="w">        </span><span class="p">}</span>
<span class="linenos">35</span><span class="w">    </span><span class="p">);</span>
<span class="linenos">36</span><span class="p">}</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="c1">// node-twitter is made available under terms of the BSD 3-Clause License.</span>
<span class="linenos">39</span><span class="c1">// http://www.opensource.org/licenses/BSD-3-Clause</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/99b8a927133a02feaee287baf9f93f59/twitterPushbutton.js"><code class="xref download docutils literal notranslate"><span class="pre">twitterPushbutton.js</span></code></a></p>
<p>To see many other examples, go to <a class="reference external" href="https://www.npmjs.com/package/twitter">Twitter for Node.js on NPMJS.com</a>.</p>
<p>This opens up many new possibilities. You can read a temperature sensor and tweet its
value whenever it changes, or you can turn on an LED whenever a certain hashtag
is used. What are you going to tweet?</p>
</section>
<section id="wiring-the-iot-with-node-red">
<span id="networking-node-red"></span><h2>Wiring the IoT with Node-RED<a class="headerlink" href="#wiring-the-iot-with-node-red" title="Link to this heading">#</a></h2>
<section id="id23">
<h3>Problem<a class="headerlink" href="#id23" title="Link to this heading">#</a></h3>
<p>You want BeagleBone to interact with the Internet,
but you want to program it graphically.</p>
</section>
<section id="id24">
<h3>Solution<a class="headerlink" href="#id24" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="http://nodered.org/">Node-RED</a> is a visual tool for wiring the IoT.
It makes it easy to turn on a light when a certain hashtag is tweeted,
or spin a motor if the forecast is for hot weather.</p>
</section>
</section>
<section id="starting-node-red">
<h2>Starting Node-RED<a class="headerlink" href="#starting-node-red" title="Link to this heading">#</a></h2>
<p>Node-RED is already installed, to run Node-RED, use the following command to start.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>nodered
</pre></div>
</div>
<p>Or run the following to have Node-RED start everytime you reboot.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bone$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>nodered
</pre></div>
</div>
<p>Node-RED is listening on part <em>1880</em>. Point your browser to
<a class="reference external" href="http://192.168.7.2:1880">http://192.168.7.2:1880</a>, and you will see the screen shown in <a class="reference internal" href="#networking-node-red-fig"><span class="std std-ref">The Node-RED web page</span></a>.</p>
<figure class="align-center" id="id49">
<span id="networking-node-red-fig"></span><img alt="node-red" src="../../../_images/node-red.png" />
<figcaption>
<p><span class="caption-number">Fig. 691 </span><span class="caption-text">The Node-RED web page</span><a class="headerlink" href="#id49" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="building-a-node-red-flow">
<h2>Building a Node-RED Flow<a class="headerlink" href="#building-a-node-red-flow" title="Link to this heading">#</a></h2>
<p>The example in this recipe builds a Node-RED flow that will toggle an LED whenever a certain hashtag
is tweeted. But first, you need to set up the Node-RED flow with the <em>twitter</em> node:</p>
<ul class="simple">
<li><p>On the Node-RED web page, scroll down until you see the <em>social</em> nodes on the left side of the page.</p></li>
<li><p>Drag the <em>twitter</em> node to the canvas, as shown in <a class="reference internal" href="#networking-node-twitter-fig"><span class="std std-ref">Node-RED twitter node</span></a>.</p></li>
</ul>
<figure class="align-center" id="id50">
<span id="networking-node-twitter-fig"></span><img alt="node-red" src="../../../_images/node-twitter.png" />
<figcaption>
<p><span class="caption-number">Fig. 692 </span><span class="caption-text">Node-RED twitter node</span><a class="headerlink" href="#id50" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Authorize Twitter by double-clicking the <em>twitter</em> node. You’ll see the screen shown in <a class="reference internal" href="#networking-node-twitter-auth-fig"><span class="std std-ref">Node-RED Twitter authorization, step 1</span></a>.</p>
<figure class="align-center" id="id51">
<span id="networking-node-twitter-auth-fig"></span><img alt="node-red authentication" src="../../../_images/node-twitter-auth.png" />
<figcaption>
<p><span class="caption-number">Fig. 693 </span><span class="caption-text">Node-RED Twitter authorization, step 1</span><a class="headerlink" href="#id51" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Click the pencil button to bring up the dialog box shown in <a class="reference internal" href="#networking-node-twitter-auth2-fig"><span class="std std-ref">Node-RED twitter authorization, step 2</span></a>.</p>
<figure class="align-center" id="id52">
<span id="networking-node-twitter-auth2-fig"></span><img alt="node-red authentication2" src="../../../_images/node-twitter-auth2.png" />
<figcaption>
<p><span class="caption-number">Fig. 694 </span><span class="caption-text">Node-RED twitter authorization, step 2</span><a class="headerlink" href="#id52" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Click the “here” link, as shown in <a class="reference internal" href="#networking-node-twitter-auth2-fig"><span class="std std-ref">Node-RED twitter authorization, step 2</span></a>, and you’ll be taken to Twitter to authorize Node-RED.</p></li>
<li><p>Log in to Twitter and click the “Authorize app” button (<a class="reference internal" href="#networking-node-twitter-auth3-fig"><span class="std std-ref">Node-RED Twitter site authorization</span></a>).</p></li>
</ul>
<figure class="align-center" id="id53">
<span id="networking-node-twitter-auth3-fig"></span><img alt="node-red authentication3" src="../../../_images/node-twitter-auth3.png" />
<figcaption>
<p><span class="caption-number">Fig. 695 </span><span class="caption-text">Node-RED Twitter site authorization</span><a class="headerlink" href="#id53" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>When you’re back to Node-RED, click the Add button, add your Twitter credentials, enter the hashtags to respond to (<a class="reference internal" href="#networking-node-twitter-beagle-fig"><span class="std std-ref">Node-RED adding the #BeagleBone hashtag</span></a>), and then click the Ok button.</p></li>
</ul>
<figure class="align-center" id="id54">
<span id="networking-node-twitter-beagle-fig"></span><img alt="node-red beagle hash" src="../../../_images/node-twitter-beagle.png" />
<figcaption>
<p><span class="caption-number">Fig. 696 </span><span class="caption-text">Node-RED adding the #BeagleBone hashtag</span><a class="headerlink" href="#id54" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Go back to the left panel, scroll up to the top, and then drag the <em>debug</em> node to the canva- (<em>debug</em> is in the <em>output</em> section.)</p></li>
<li><p>Connect the two nodes by clicking and dragging (<a class="reference internal" href="#networking-node-twitter-debug-fig"><span class="std std-ref">Node-RED Twitter adding debug node and connecting</span></a>).</p></li>
</ul>
<figure class="align-center" id="id55">
<span id="networking-node-twitter-debug-fig"></span><img alt="node-red debug" src="../../../_images/node-twitter-debug.png" />
<figcaption>
<p><span class="caption-number">Fig. 697 </span><span class="caption-text">Node-RED Twitter adding <em>debug</em> node and connecting</span><a class="headerlink" href="#id55" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>In the right panel, in the upper-right corner, click the “debug” tab.</p></li>
<li><p>Finally, click the Deploy button above the “debug” tab.</p></li>
</ul>
<p>Your Node-RED flow is now running on the Bone. Test it by going to Twitter and tweeting something with
the hashtag <em>#BeagleBone</em>. Your Bone is now responding to events happening out in the world.</p>
</section>
<section id="adding-an-led-toggle">
<h2>Adding an LED Toggle<a class="headerlink" href="#adding-an-led-toggle" title="Link to this heading">#</a></h2>
<p>Now, we’re ready to add the LED toggle:</p>
<ul class="simple">
<li><p>Wire up an LED as shown in <a class="reference internal" href="../03displays/displays.html#displays-externalled"><span class="std std-ref">Toggling an External LED</span></a>. Mine is wired to <em>P9_14</em>.</p></li>
<li><p>Scroll to the bottom of the left panel and drag the <em>bbb-discrete-out</em> node (second from the bottom of the <em>bbb</em> nodes) to the canvas and wire it (<a class="reference internal" href="#networking-node-bbb-out-fig"><span class="std std-ref">Node-RED adding bbb-discrete-out node</span></a>).</p></li>
</ul>
<figure class="align-center" id="id56">
<span id="networking-node-bbb-out-fig"></span><img alt="node-red discrete out node" src="../../../_images/node-disc-out.png" />
<figcaption>
<p><span class="caption-number">Fig. 698 </span><span class="caption-text">Node-RED adding bbb-discrete-out node</span><a class="headerlink" href="#id56" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Double-click the node, select your GPIO pin and “Toggle state,”
and then set “Startup as” to <em>1</em> (<a class="reference internal" href="#networking-node-bbb-out-setup-fig"><span class="std std-ref">Node-RED adding bbb-discrete-out configuration</span></a>).</p>
<figure class="align-center" id="id57">
<span id="networking-node-bbb-out-setup-fig"></span><img alt="node-red discrete out setup" src="../../../_images/node-disc-out-setup.png" />
<figcaption>
<p><span class="caption-number">Fig. 699 </span><span class="caption-text">Node-RED adding bbb-discrete-out configuration</span><a class="headerlink" href="#id57" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Click Ok and then Deploy.</p>
<p>Test again. The LED will toggle every time the hashtag <em>#BeagleBone</em> is tweeted. With a little more exploring,
you should be able to have your Bone ringing a bell or spinning a motor in response to tweets.</p>
</section>
<section id="communicating-over-a-serial-connection-to-an-arduino-or-launchpad">
<h2>Communicating over a Serial Connection to an Arduino or LaunchPad<a class="headerlink" href="#communicating-over-a-serial-connection-to-an-arduino-or-launchpad" title="Link to this heading">#</a></h2>
<section id="id25">
<h3>Problem<a class="headerlink" href="#id25" title="Link to this heading">#</a></h3>
<p>You would like your Bone to talk to an Arduino or LaunchPad.</p>
</section>
<section id="id26">
<h3>Solution<a class="headerlink" href="#id26" title="Link to this heading">#</a></h3>
<p>The common serial port (also known as a UART) is the simplest way to
talk between the two.  Wire it up as shown in <a class="reference internal" href="#networking-launchpad-fig"><span class="std std-ref">Wiring a LaunchPad to a Bone via the common serial port</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>BeagleBone Black runs at 3.3 V. When wiring other devices to it, ensure that
they are also 3.3 V. The LaunchPad I’m using is 3.3 V, but many Arduinos are
5.0 V and thus won’t work. Or worse, they might damage your Bone.</p>
</div>
<figure class="align-center" id="id58">
<span id="networking-launchpad-fig"></span><img alt="MSP430 LaunchPad" src="../../../_images/launchPad_bb.png" />
<figcaption>
<p><span class="caption-number">Fig. 700 </span><span class="caption-text">Wiring a LaunchPad to a Bone via the common serial port</span><a class="headerlink" href="#id58" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Add the code (or <code class="docutils literal notranslate"><span class="pre">sketch</span></code>, as it’s called in Arduino-speak) in <a class="reference internal" href="#js-launchpad-code"><span class="std std-ref">LaunchPad code for communicating via the UART (launchPad.ino)</span></a>
to a file called <code class="docutils literal notranslate"><span class="pre">launchPad.ino</span></code> and run it on your LaunchPad.</p>
<div class="literal-block-wrapper docutils container" id="id59">
<span id="js-launchpad-code"></span><div class="code-block-caption"><span class="caption-number">Listing 72 </span><span class="caption-text">LaunchPad code for communicating via the UART (launchPad.ino)</span><a class="headerlink" href="#id59" title="Link to this code">#</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cm">/*</span>
<span class="linenos"> 2</span><span class="cm">  Tests connection to a BeagleBone</span>
<span class="linenos"> 3</span><span class="cm">  Mark A. Yoder</span>
<span class="linenos"> 4</span><span class="cm">  Waits for input on Serial Port</span>
<span class="linenos"> 5</span><span class="cm">  g - Green toggle</span>
<span class="linenos"> 6</span><span class="cm">  r - Red toggle</span>
<span class="linenos"> 7</span><span class="cm">*/</span>
<span class="linenos"> 8</span><span class="kt">char</span><span class="w"> </span><span class="n">inChar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// incoming serial byte</span>
<span class="linenos"> 9</span><span class="kt">int</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">10</span><span class="kt">int</span><span class="w"> </span><span class="n">green</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span>
<span class="linenos">13</span><span class="p">{</span>
<span class="linenos">14</span><span class="w">  </span><span class="c1">// initialize the digital pin as an output.</span>
<span class="linenos">15</span><span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w">           </span><span class="c1">// ①</span>
<span class="linenos">16</span><span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">GREEN_LED</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w">  </span>
<span class="linenos">17</span><span class="w">  </span><span class="c1">// start serial port at 9600 bps:</span>
<span class="linenos">18</span><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span><span class="w">                 </span><span class="c1">// ②</span>
<span class="linenos">19</span><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Command (r, g): &quot;</span><span class="p">);</span><span class="w">   </span><span class="c1">// ③</span>
<span class="linenos">20</span><span class="w">  </span>
<span class="linenos">21</span><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">GREEN_LED</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">);</span><span class="w">     </span><span class="c1">// ④</span>
<span class="linenos">22</span><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="w">  </span><span class="n">RED_LED</span><span class="p">,</span><span class="w"> </span><span class="n">red</span><span class="p">);</span>
<span class="linenos">23</span><span class="p">}</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span>
<span class="linenos">26</span><span class="p">{</span>
<span class="linenos">27</span><span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">       </span><span class="c1">// ⑤</span>
<span class="linenos">28</span><span class="w">    </span><span class="n">inChar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
<span class="linenos">29</span><span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="n">inChar</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">                  </span><span class="c1">// ⑥</span>
<span class="linenos">30</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;g&#39;</span><span class="p">:</span>
<span class="linenos">31</span><span class="w">        </span><span class="n">green</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">green</span><span class="p">;</span>
<span class="linenos">32</span><span class="w">        </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">GREEN_LED</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">);</span>
<span class="linenos">33</span><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Green&quot;</span><span class="p">);</span>
<span class="linenos">34</span><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">35</span><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;r&#39;</span><span class="p">:</span>
<span class="linenos">36</span><span class="w">        </span><span class="n">red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">red</span><span class="p">;</span>
<span class="linenos">37</span><span class="w">        </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span><span class="w"> </span><span class="n">red</span><span class="p">);</span>
<span class="linenos">38</span><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Red&quot;</span><span class="p">);</span>
<span class="linenos">39</span><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="linenos">40</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">41</span><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Command (r, g): &quot;</span><span class="p">);</span>
<span class="linenos">42</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">43</span><span class="p">}</span>
<span class="linenos">44</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/3669bf8c59db4f84aec65fa2e2601a3b/launchPad.ino"><code class="xref download docutils literal notranslate"><span class="pre">launchPad.ino</span></code></a></p>
<p>① Set the mode for the built-in red and green LEDs.</p>
<p>② Start the serial port at 9600 baud.</p>
<p>③ Prompt the user, which in this case is the Bone.</p>
<p>④ Set the LEDs to the current values of the <em>red</em> and <em>green</em> variables.</p>
<p>⑤ Wait for characters to arrive on the serial port.</p>
<p>⑥ After the characters are received, read it and respond to it.</p>
<p>On the Bone, add the script in <a class="reference internal" href="#js-launchpadbeagle-code"><span class="std std-ref">Code for communicating via the UART (launchPad.js)</span></a> to a file called <cite>launchPad.js</cite> and run it.</p>
<div class="literal-block-wrapper docutils container" id="id60">
<span id="js-launchpadbeagle-code"></span><div class="code-block-caption"><span class="caption-number">Listing 73 </span><span class="caption-text">Code for communicating via the UART (launchPad.js)</span><a class="headerlink" href="#id60" title="Link to this code">#</a></div>
<div class="highlight-JavaScript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env node</span>
<span class="linenos"> 2</span><span class="c1">// Need to add exports.serialParsers = m.module.parsers;</span>
<span class="linenos"> 3</span><span class="c1">// to /usr/local/lib/node_modules/bonescript/serial.js</span>
<span class="linenos"> 4</span><span class="kd">var</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;bonescript&#39;</span><span class="p">);</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kd">var</span><span class="w"> </span><span class="nx">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/dev/ttyO1&#39;</span><span class="p">;</span><span class="w">                    </span><span class="c1">// ①</span>
<span class="linenos"> 7</span><span class="kd">var</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="nx">baudrate</span><span class="o">:</span><span class="w"> </span><span class="mf">9600</span><span class="p">,</span><span class="w">                         </span><span class="c1">// ②</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="nx">parser</span><span class="o">:</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">serialParsers</span><span class="p">.</span><span class="nx">readline</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// ③</span>
<span class="linenos">10</span><span class="p">};</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="nx">b</span><span class="p">.</span><span class="nx">serialOpen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">,</span><span class="w"> </span><span class="nx">onSerial</span><span class="p">);</span><span class="w">      </span><span class="c1">// ④</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kd">function</span><span class="w"> </span><span class="nx">onSerial</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">                      </span><span class="c1">// ⑤</span>
<span class="linenos">15</span><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">event</span><span class="p">);</span>
<span class="linenos">16</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">17</span><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;***ERROR*** &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
<span class="linenos">18</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">19</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">event</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;open&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;***OPENED***&#39;</span><span class="p">);</span>
<span class="linenos">21</span><span class="w">        </span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">sendCommand</span><span class="p">,</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span><span class="w">     </span><span class="c1">// ⑥</span>
<span class="linenos">22</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">23</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">event</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;data&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">24</span><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
<span class="linenos">25</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">26</span><span class="p">}</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="kd">var</span><span class="w"> </span><span class="nx">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;g&#39;</span><span class="p">];</span><span class="w">                   </span><span class="c1">// ⑦</span>
<span class="linenos">29</span><span class="kd">var</span><span class="w"> </span><span class="nx">commIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="kd">function</span><span class="w"> </span><span class="nx">sendCommand</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">32</span><span class="w">    </span><span class="c1">// console.log(&#39;Command: &#39; + command[commIdx]);</span>
<span class="linenos">33</span><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">serialWrite</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span><span class="w"> </span><span class="nx">command</span><span class="p">[</span><span class="nx">commIdx</span><span class="o">++</span><span class="p">]);</span><span class="w"> </span><span class="c1">// ⑧</span>
<span class="linenos">34</span><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nx">commIdx</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">command</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">         </span><span class="c1">// ⑨</span>
<span class="linenos">35</span><span class="w">        </span><span class="nx">commIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="linenos">36</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">37</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p><a class="reference download internal" download="" href="../../../_downloads/9f53a890620a8d7822fce030571046dd/launchPad.js"><code class="xref download docutils literal notranslate"><span class="pre">launchPad.js</span></code></a></p>
<p>① Select which serial port to use. <a class="reference internal" href="#networking-cape-headers-serial-fig"><span class="std std-ref">Table of UART outputs</span></a> sows what’s available. We’ve wired <em>P9_24</em> and <em>P9_26</em>, so we are using serial port <em>/dev/ttyO1</em>. (Note that’s the letter <code class="docutils literal notranslate"><span class="pre">O</span></code> and not the number <code class="docutils literal notranslate"><span class="pre">zero</span></code>.)</p>
<p>② Set the baudrate to 9600, which matches the setting on the LaunchPad.</p>
<p>③ Read one line at a time up to the newline character (<em>n</em>).</p>
<p>④ Open the serial port and call <em>onSerial()</em> whenever there is data available.</p>
<p>⑤ Determine what event has happened on the serial port and respond to it.</p>
<p>⑥ If the serial port has been <em>opened</em>, start calling <em>sendCommand()</em> every 1000 ms.</p>
<p>⑦ These are the two commands to send.</p>
<p>⑧ Write the character out to the serial port and to the LaunchPad.</p>
<p>⑨ Move to the next command.</p>
<figure class="align-center" id="id61">
<span id="networking-cape-headers-serial-fig"></span><img alt="UART outputs" src="../../../_images/cape-headers-serial1.png" />
<figcaption>
<p><span class="caption-number">Fig. 701 </span><span class="caption-text">Table of UART outputs</span><a class="headerlink" href="#id61" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="discussion">
<h3>Discussion<a class="headerlink" href="#discussion" title="Link to this heading">#</a></h3>
<p>When you run the script in <a class="reference internal" href="#js-launchpadbeagle-code"><span class="std std-ref">Code for communicating via the UART (launchPad.js)</span></a>, the Bone opens up the
serial port and every second sends a new command, either <em>r</em> or <em>g</em>.
The LaunchPad waits for the command, when it arrives, responds by toggling the corresponding LED.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../05tips/tips.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Beyond the Basics</p>
      </div>
    </a>
    <a class="right-next"
       href="../07kernel/kernel.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">The Kernel</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item"><a role="button" data-bs-toggle="modal" data-bs-target="#todoModal" href="#" id="modalfortodoitems">
    <button type="button" class="btn btn-danger">Outstanding todo items</button>
</a>

<div class="modal fade" id="todoModal" aria-labelledby="todoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title m-0 text-dark" id="todoModalLabel">Outstanding todo items</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div> 
        <div class="modal-body">
            <ul class="list-group list-group-flush" id="todolist">
                <!-- Auto generated for page -->
            </ul>
        </div>
        </div>
    </div>
</div>

<script>

    document.body.appendChild(document.getElementById('todoModal'));
    var modalfortodoitems = document.getElementById('modalfortodoitems');
    var modalfortodoitemsparent = modalfortodoitems.parentNode;
    var todoItems = document.getElementsByClassName('admonition-todo');
    var todolist = document.getElementById('todolist')

    if(todoItems.length == 0 || !todoItems[0].hasAttribute('id')) {
        modalfortodoitemsparent.remove();
    } else  {
        for (var i = 0; i < todoItems.length; ++i) {
            var todoItem = document.createElement('li');
            var link = document.createElement('a');
            link.textContent = todoItems[i].getElementsByTagName('p')[1].innerHTML;
            link.href = '#' + todoItems[i].id;
            link.addEventListener('click', function() {
                // Use Bootstrap's modal method to hide the modal
                const todoModal = document.getElementById('todoModal');
                const modal = bootstrap.Modal.getInstance(todoModal);
                modal.hide();
            });
            todoItem.appendChild(link);
            todoItem.classList.add('list-group-item');
            todolist.appendChild(todoItem);
        }
    }
    
</script></div>

  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-your-host-computer-s-files-on-the-bone">Accessing Your Host Computer’s Files on the Bone</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#problem">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#solution">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#serving-web-pages-from-the-bone">Serving Web Pages from the Bone</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-the-bone-via-a-web-browser">Interacting with the Bone via a Web Browser</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#first-flask-hello-world">First Flask - hello, world</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-template">Adding a template</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#displaying-gpio-status-in-a-web-browser-reading-a-button">Displaying GPIO Status in a Web Browser - reading a button</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#controlling-gpios">Controlling GPIOs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-data">Plotting Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Solution</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analog-in-continuous">Analog in - Continuous</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#analog-in-continuous-change-the-sample-rate">Analog in - Continuous, Change the sample rate</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sending-an-email">Sending an Email</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sending-an-sms-message">Sending an SMS Message</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#displaying-the-current-weather-conditions">Displaying the Current Weather Conditions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sending-and-receiving-tweets">Sending and Receiving Tweets</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-project-and-app">Creating a Project and App</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-tweet">Creating a tweet</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-a-tweet">Deleting a tweet</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#wiring-the-iot-with-node-red">Wiring the IoT with Node-RED</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Solution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-node-red">Starting Node-RED</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-a-node-red-flow">Building a Node-RED Flow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-an-led-toggle">Adding an LED Toggle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#communicating-over-a-serial-connection-to-an-arduino-or-launchpad">Communicating over a Serial Connection to an Arduino or LaunchPad</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Problem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Solution</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#discussion">Discussion</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://openbeagle.org/docs/docs.beagleboard.io/-/edit/main/books/beaglebone-cookbook/06iot/iot.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on OpenBeagle
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/books/beaglebone-cookbook/06iot/iot.rst">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
    

    

    

    

    

    

    

    

    

    

    

    
        
        <a role="button" href="/beaglebone-cookbook.pdf" target="_blank">
            <i class="fa-solid fa-download"></i> Download PDF
        </a>
    

    

    

    
</div>

  <div class="sidebar-secondary-item"><a role="button" data-bs-toggle="modal" data-bs-target="#feedbackModal" href="#" onclick="getFeedbackButtonhref(this)">
    <i class="fa-regular fa-message"></i> Provide Feedback
</a>

<div class="modal fade" id="feedbackModal" aria-labelledby="feedbackModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title m-0 text-dark" id="feedbackModalLabel">Feedback</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="btn-group mb-3" role="group" aria-label="Basic radio toggle button group" id="feedbackType"
                    onChange="feedbackHandler()">
                    <input type="radio" class="btn-check" name="feedbackType" id="btnradio1" autocomplete="off"
                        value="Issue">
                    <label class="btn btn-outline-dark shadow-none" for="btnradio1"><i
                            class="fa-solid fa-triangle-exclamation"></i> Issue</label>

                    <input type="radio" class="btn-check" name="feedbackType" id="btnradio2" autocomplete="off"
                        value="Feedback" checked>
                    <label class="btn btn-outline-dark shadow-none" for="btnradio2"><i
                            class="fa-regular fa-message"></i> Feedback</label>

                    <input type="radio" class="btn-check" name="feedbackType" id="btnradio3" autocomplete="off"
                        value="Idea">
                    <label class="btn btn-outline-dark shadow-none" for="btnradio3"><i
                            class="fa-solid fa-lightbulb"></i> Idea</label>
                </div>
                <div class="mb-3">
                    <input type="title" class="form-control bg-light text-dark" id="feedbackModalTitle"
                        placeholder="Title" onChange="feedbackHandler()">
                </div>
                <div class="mb-3">
                    <textarea class="form-control bg-light text-dark" id="feedbackModalDescription" minlength="13"
                        rows="3" placeholder="Description" onChange="feedbackHandler()"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="feedbackClear()">Clear
                    & Close</button>
                <span id="generateLinkButtonTooltip" data-bs-placement="bottom" data-bs-toggle="tooltip">
                    <a href="javascript:void(0);" id="feedbacklink" type="button"
                        class="btn btn-primary disabled text-light">
                        <i class="fa-solid fa-up-right-from-square"></i> Generate OpenBeagle Issue
                    </a>
                </span>
            </div>
        </div>
    </div>
</div>

<script>

    var titleMinLength = 4
    var descriptionMinLength = 12

    document.body.appendChild(document.getElementById('feedbackModal'));

    var generateLinkButtonTooltip = document.getElementById("generateLinkButtonTooltip")
    var link = document.getElementById("feedbacklink")
    var gitlab_project = ""
    var title = document.getElementById("feedbackModalTitle")
    var description = document.getElementById("feedbackModalDescription")
    var generatedFromLink = ""


    title.placeholder = "Title (minimum " + titleMinLength + " characters)"
    description.placeholder = "Description (minimum " + descriptionMinLength + " characters)"

    function feedbackHandler() {
        var type = document.querySelector('input[name="feedbackType"]:checked').value

        if (!gitlab_project.match(/^[a-zA-Z]+:\/\//)) {
            gitlab_project = 'https://' + gitlab_project;
        }

        if (title.value.length >= titleMinLength && description.value.length >= descriptionMinLength) {
            link.target = "_blank"
            link.classList.remove("disabled");
            generateLinkButtonTooltip.title = "You must be logged in to OpenBeagle.org to generate an Issue!"
            link.href = gitlab_project + "/-/issues/new?issue[title]=" + type + ": " + title.value + "&issue[description]=" + description.value + "%0A%0AGenerated from: " + generatedFromLink.replace('#', '%23')
        } else {
            link.classList.add("disabled");
            generateLinkButtonTooltip.title = "Add proper title and description to activate the link!"
        }
    }

    function feedbackClear() {
        title.value = ""
        description.value = ""
        link.href = ""
        link.classList.add("disabled");
    }

    document.addEventListener('DOMContentLoaded', function () {
        const headerlinks = document.getElementsByClassName("headerlink");

        for (let i = 0; i < headerlinks.length; i++) {
            if (headerlinks[i].classList.contains('headerlink-feedback')) {
                continue;
            }

            headerlinks[i].innerHTML = `<i class="fa-solid fa-link"></i>`;
            headerlinks[i].addEventListener('click', function (event) {
                event.preventDefault();
                const link = this.href;
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(link).then(() => {
                        console.log("Link copied to clipboard:", link);
                        this.innerHTML = `<i class="fa-regular fa-square-check"></i>`;
                        setTimeout(() => {
                            this.innerHTML = `<i class="fa-solid fa-link"></i>`;
                        }, 1000);
                    }).catch(err => {
                        console.error("Failed to copy:", err);
                    });
                } else {
                    fallbackCopyText(link, this);
                }
            });

            const feedbackLink = headerlinks[i].cloneNode(true);

            feedbackLink.classList.add('headerlink-feedback');
            feedbackLink.innerHTML = '<i class="fa-regular fa-message"></i>';
            feedbackLink.title = "Provide Feedback";
            feedbackLink.setAttribute("data-bs-toggle", "modal");
            feedbackLink.setAttribute("data-bs-target", "#feedbackModal");
            feedbackLink.setAttribute("onclick", "getFeedbackButtonhref(this)");

            if (headerlinks[i].parentNode) {
                headerlinks[i].parentNode.insertBefore(feedbackLink, headerlinks[i].nextSibling || null);
            }
        }
    });

    function fallbackCopyText(text, element) {
        const textarea = document.createElement("textarea");
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        try {
            document.execCommand("copy");
            element.innerHTML = `<i class="fa-regular fa-square-check"></i>`;
            setTimeout(() => {
                element.innerHTML = `<i class="fa-solid fa-link"></i>`;
            }, 1000);
        } catch (err) {
            console.error("Fallback: Failed to copy:", err);
        }
        document.body.removeChild(textarea);
    }

    function getFeedbackButtonhref(clickedFeedbackLink) {
        generatedFromLink = clickedFeedbackLink.href
        feedbackHandler()
    }

</script></div>

  <div class="sidebar-secondary-item"><a role="button" href="https://forum.beagleboard.org" target="_blank">
    <i class="fa-brands fa-discourse"></i> Discuss on Forum
</a></div>

  <div class="sidebar-secondary-item"><div class="card bg-light mt-4 text-center">
    <div class="card-body">
        <p class="card-text text-dark">
        <a href="https://www.beagleboard.org/" target="_blank">BeagleBoard.org</a> 
        is all about being open, please discuss in public on our 
        <a href="https://forum.beagleboard.org" target="_blank">forum</a>!</p>
    </div>
</div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        


      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, BeagleBoard.org Foundation.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__center">
      
        <div class="footer-item"><a href="https://creativecommons.org/licenses/by-sa/4.0/" style="text-decoration:none">
    <img src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg"/>
</a></div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="last-updated">
  Last updated on Jun 29, 2025.
  <br/>
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>